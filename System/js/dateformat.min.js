/************************************************************************
*
*			Date 对象的扩展
*
**************************************************************************/
Date.prototype.Format=function(a){var d={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var b in d)(new RegExp("("+b+")")).test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?d[b]:("00"+d[b]).substr((""+d[b]).length)));return a};Date.prototype.DateAdd=function(a,d){d=parseInt(d);var b=new Date(this.getTime());switch(a){case "y":b.setFullYear(this.getFullYear()+d);break;case "m":b.setMonth(this.getMonth()+d);break;case "d":b.setDate(this.getDate()+d);break;case "w":b.setDate(this.getDate()+7*d);break;case "h":b.setHours(this.getHours()+d);break;case "n":b.setMinutes(this.getMinutes()+d);break;case "s":b.setSeconds(this.getSeconds()+d);break;case "l":b.setMilliseconds(this.getMilliseconds()+d)}return b};Date.prototype.getWeekOfYear=function(a){a=(a||0)-0;if(isNaN(a)||6<a)a=0;var d=this.getFullYear(),b=new Date(d,0,1);a=7-b.getDay()+a;d=(new Date(d,this.getMonth(),this.getDate())-b)/864E5+1;return Math.ceil((d-a)/7)+1};Date.prototype.getWeekOfMonth=function(a){a=(a||0)-0;if(isNaN(a)||6<a)a=0;var d=this.getDay(),b=this.getDate();return Math.ceil((b-d-1)/7)+(d>=a?1:0)};Date.prototype.getLunar=function(a){function d(f){return q[f%10]+w[f%12]}function b(a){return f[a-1900]&15?f[a-1900]&65536?30:29:0}function c(a){var q,c=0,e=Math.floor((a-new Date(1900,0,31))/864E5);this.dayCyl=e+40;this.monCyl=14;for(a=1900;2050>a&&0<e;a++){q=348;for(c=32768;8<c;c>>=1)q+=f[a-1900]&c?1:0;c=q+b(a);e-=c;this.monCyl+=12}0>e&&(e+=c,a--,this.monCyl-=12);this.year=a;this.yearCyl=a-1864;q=f[a-1900]&15;this.isLeap=!1;for(a=1;13>a&&0<e;a++)0<q&&a==q+1&&0==this.isLeap?(--a,this.isLeap=!0,c=b(this.year)):c=f[this.year-1900]&65536>>a?30:29,1==this.isLeap&&a==q+1&&(this.isLeap=!1),e-=c,0==this.isLeap&&this.monCyl++;0==e&&0<q&&a==q+1&&(this.isLeap?this.isLeap=!1:(this.isLeap=!0,--a,--this.monCyl));0>e&&(e+=c,--a,--this.monCyl);this.month=a;this.day=e+1}function g(a,f){var b="\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341".split(""),q=["\u521d","\u5341","\u5eff","\u5345","\u3000"],c;c=10<a?"\u5341"+b[a-10]:b[a];c+="\u6708";switch(f){case 10:c+="\u521d\u5341";break;case 20:c+="\u4e8c\u5341";break;case 30:c+="\u4e09\u5341";break;default:c+=q[Math.floor(f/10)],c+=b[f%10]}return c}function h(a){var f="\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341".split(""),b=["\u521d","\u5341","\u5eff","\u5345","\u3000"],q="";switch(a){case 10:q+="\u521d\u5341";break;case 20:q+="\u4e8c\u5341";break;case 30:q+="\u4e09\u5341";break;default:q+=b[Math.floor(a/10)],q+=f[a%10]}return q}var f=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42448,83315,21200,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46496,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448],r="\u9f20\u725b\u864e\u5154\u9f99\u86c7\u9a6c\u7f8a\u7334\u9e21\u72d7\u732a".split(""),q="\u7532\u4e59\u4e19\u4e01\u620a\u5df1\u5e9a\u8f9b\u58ec\u7678".split(""),w="\u5b50\u4e11\u5bc5\u536f\u8fb0\u5df3\u5348\u672a\u7533\u9149\u620c\u4ea5".split(""),e=new Date(this.getTime()),p=e.getFullYear(),n=e.getMonth(),e=e.getDate();switch(a){case 0:var m=new Date(p,n,e),m=new c(m);return r="\u3010"+r[(p-4)%12]+"\u3011"+d(m.monCyl)+"\u6708 "+d(m.dayCyl++)+"\u65e5";case 1:return m=new Date(p,n,e),m=new c(m),r=d(p-1900+36)+"\u5e74 "+g(m.month,m.day);case 2:a=[0,21208,42467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758];var z="\u5c0f\u5bd2 \u5927\u5bd2 \u7acb\u6625 \u96e8\u6c34 \u60ca\u86f0 \u6625\u5206 \u6e05\u660e \u8c37\u96e8 \u7acb\u590f \u5c0f\u6ee1 \u8292\u79cd \u590f\u81f3 \u5c0f\u6691 \u5927\u6691 \u7acb\u79cb \u5904\u6691 \u767d\u9732 \u79cb\u5206 \u5bd2\u9732 \u971c\u964d \u7acb\u51ac \u5c0f\u96ea \u5927\u96ea \u51ac\u81f3".split(" "),A="0101*\u6625\u8282;0115 \u5143\u5bb5\u8282;0505 \u7aef\u5348\u8282;0707 \u4e03\u5915\u60c5\u4eba\u8282;0715 \u4e2d\u5143\u8282;0815 \u4e2d\u79cb\u8282;0909 \u91cd\u9633\u8282;1208 \u814a\u516b\u8282;1224 \u5c0f\u5e74;0100*\u9664\u5915".split(";"),B="0101*\u5143\u65e6;0214 \u60c5\u4eba\u8282;0308 \u5987\u5973\u8282;0312 \u690d\u6811\u8282;0315 \u6d88\u8d39\u8005\u6743\u76ca\u65e5;0401 \u611a\u4eba\u8282;0501 \u52b3\u52a8\u8282;0504 \u9752\u5e74\u8282;0512 \u62a4\u58eb\u8282;0601 \u513f\u7ae5\u8282;0701 \u5efa\u515a\u8282 \u9999\u6e2f\u56de\u5f52\u7eaa\u5ff5;0801 \u5efa\u519b\u8282;0808 \u7236\u4eb2\u8282;0908 \u8302\u751f\u65e5;0909 \u6bdb\u6cfd\u4e1c\u901d\u4e16\u7eaa\u5ff5;0910 \u6559\u5e08\u8282;0928 \u5b54\u5b50\u8bde\u8fb0;1001*\u56fd\u5e86\u8282;1006 \u8001\u4eba\u8282;1001 ListenWind\u751f\u65e5;1024 \u8054\u5408\u56fd\u65e5;1112 \u5b59\u4e2d\u5c71\u8bde\u8fb0;1220 \u6fb3\u95e8\u56de\u5f52\u7eaa\u5ff5;1225 \u5723\u8bde\u8282;1226 \u6bdb\u6cfd\u4e1c\u8bde\u8fb0".split(";"),m=new Date(p,n,e),m=new c(m),v="",x=v="",y="",t,u;for(i in A)A[i].match(/^(\d{2})(.{2})([\s\*])(.+)$/)&&(t=Number(RegExp.$1)-m.month,u=Number(RegExp.$2)-m.day,0==t&&0==u&&(y=RegExp.$4));for(i in B)B[i].match(/^(\d{2})(\d{2})([\s\*])(.+)$/)&&(t=Number(RegExp.$1)-(n+1),u=Number(RegExp.$2)-e,0==t&&0==u&&(x=RegExp.$4));t=new Date(3.15569259747E10*(p-1900)+6E4*a[2*n+1]+Date.UTC(1900,0,6,2,5));u=t.getUTCDate();u==e&&(v=z[2*n+1]);t=new Date(3.15569259747E10*(p-1900)+6E4*a[2*n]+Date.UTC(1900,0,6,2,5));u=t.getUTCDate();u==e&&(v=z[2*n]);return"\u6625\u8282"==y?"\u795d\u65b0\u6625\u6109\u5feb\uff0c\u9616\u5bb6\u5e78\u798f\uff01":"\u5143\u5bb5\u8282"==y?"\u795d\u5143\u5bb5\u8282\u5feb\u4e50\uff01":"\u4e2d\u79cb\u8282"==y?"\u795d\u4e2d\u79cb\u5e78\u798f\uff0c\u56e2\u56e2\u5706\u5706\uff01":"\u5143\u65e6"==x?"\u795d\u65b0\u5e74\u5feb\u4e50\uff0c\u597d\u8fd0\u8fde\u5e74\uff01":"\u6559\u5e08\u8282"==x?"\u795d\u6240\u6709\u6559\u5e08\u8282\u65e5\u5feb\u4e50\uff01":"\u56fd\u5e86\u8282"==x?"\u795d\u7956\u56fd\u7e41\u8363\u660c\u76db\uff0c\u50b2\u7136\u4e16\u754c\u4e1c\u65b9\uff01":v=""==v&&""==x&&""==y?"\u3010"+r[(p-4)%12]+"\u3011"+g(m.month,m.day):"\u4eca\u5929\u662f"+v+" "+x+" "+y;case 3:a=[0,21208,42467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758];z="\u5c0f\u5bd2 \u5927\u5bd2 \u7acb\u6625 \u96e8\u6c34 \u60ca\u86f0 \u6625\u5206 \u6e05\u660e \u8c37\u96e8 \u7acb\u590f \u5c0f\u6ee1 \u8292\u79cd \u590f\u81f3 \u5c0f\u6691 \u5927\u6691 \u7acb\u79cb \u5904\u6691 \u767d\u9732 \u79cb\u5206 \u5bd2\u9732 \u971c\u964d \u7acb\u51ac \u5c0f\u96ea \u5927\u96ea \u51ac\u81f3".split(" ");A="0101*\u6625\u8282;0115 \u5143\u5bb5\u8282;0505 \u7aef\u5348\u8282;0707 \u4e03\u5915\u8282;0715 \u4e2d\u5143\u8282;0815 \u4e2d\u79cb\u8282;0909 \u91cd\u9633\u8282;1208 \u814a\u516b\u8282;1224 \u5c0f\u5e74;0100*\u9664\u5915".split(";");B="0101*\u5143\u65e6;0214 \u60c5\u4eba\u8282;0308 \u5987\u5973\u8282;0312 \u690d\u6811\u8282;0401 \u611a\u4eba\u8282;0501 \u52b3\u52a8\u8282;0504 \u9752\u5e74\u8282;0512 \u62a4\u58eb\u8282;0601 \u513f\u7ae5\u8282;0701 \u5efa\u515a\u8282;0801 \u5efa\u519b\u8282;0808 \u7236\u4eb2\u8282;0910 \u6559\u5e08\u8282;1001*\u56fd\u5e86\u8282;1006 \u8001\u4eba\u8282;1225 \u5723\u8bde\u8282".split(";");m=new Date(p,n,e);m=new c(m);y=x=v=v="";for(i in A)A[i].match(/^(\d{2})(.{2})([\s\*])(.+)$/)&&(t=Number(RegExp.$1)-m.month,u=Number(RegExp.$2)-m.day,0==t&&0==u&&(y=RegExp.$4));for(i in B)B[i].match(/^(\d{2})(\d{2})([\s\*])(.+)$/)&&(t=Number(RegExp.$1)-(n+1),u=Number(RegExp.$2)-e,0==t&&0==u&&(x=RegExp.$4));t=new Date(3.15569259747E10*(p-1900)+6E4*a[2*n+1]+Date.UTC(1900,0,6,2,5));u=t.getUTCDate();u==e&&(v=z[2*n+1]);t=new Date(3.15569259747E10*(p-1900)+6E4*a[2*n]+Date.UTC(1900,0,6,2,5));u=t.getUTCDate();u==e&&(v=z[2*n]);return""!=y?y:""!=x?x:""!=v?v:v=h(m.day)}};var TUI={namespace:function(a){var d=arguments,b=null,c,g,h;for(c=0;c<d.length;c+=1)for(h=(""+d[c]).split("."),b=TUI,g="TUI"==h[0]?1:0;g<h.length;g+=1)b[h[g]]=b[h[g]]||{},b=b[h[g]];return b}};TUI.ns=TUI.namespace;TUI.hasOwnProperty=Object.prototype.hasOwnProperty?function(a,d){return a&&a.hasOwnProperty&&a.hasOwnProperty(d)}:function(a,d){return!TUI.Utils.isUndefined(a[d])&&a.constructor.prototype[d]!==a[d]};TUI.extend=function(a,d,b){if(!d||!a)throw Error("extend failed, please check that all dependencies are included.");var c=function(){},g;c.prototype=d.prototype;a.prototype=new c;a.prototype.constructor=a;a.superclass=d.prototype;d.prototype.constructor==Object.prototype.constructor&&(d.prototype.constructor=d);if(b){for(g in b)TUI.hasOwnProperty(b,g)&&(a.prototype[g]=b[g]);TUI.Utils._IEEnumFix(a.prototype,b)}};TUI.JSON=new function(){this.errorCode=0;this.errorText="";this.decode=function(){var a=arguments.length?arguments[0]:this;try{return""==a||void 0==a?(this.errorCode=1,this.errorText="\u89e3\u6790JSON\u5bf9\u8c61\u5931\u8d25\uff0c\u3010\u5185\u5bb9\u4e3a\u7a7a\u3011",null):JSON.parse(a.replace(/(\r\n)|(\n)/g,""))}catch(w){return this.errorCode=1,this.errorText="\u89e3\u6790JSON\u5bf9\u8c61\u5931\u8d25\uff0c\u3010"+w.message+"\u3011",null}};this.encode=function(){var a=arguments.length?arguments[0]:this,f;try{f=JSON.stringify(a)}catch(e){return this.errorCode=2,this.errorText="\u7f16\u7801JSON\u5bf9\u8c61\u5931\u8d25\uff0c"+e.name+"\uff0c"+e.message,null}return f=f.replace(/\\u([\d\w]{4})/gi,function(a,f){return String.fromCharCode(parseInt(f,16))})};this.toString=function(){var a=arguments.length?arguments[0]:this,b,e,p=1<arguments.length?arguments[1]:"",n=2<arguments.length?arguments[2]:0;if(null===a)b="null";else if(void 0!==a&&(e=r[typeof a](a)))switch(e){case Array:b=[];for(var m=0,n=0,z=a.length;n<z;n++)void 0!==a[n]&&(e=this.encode(a[n],p+"\t",0==m?1:0))&&(b[m++]=e);b="[".concat(b.join(",\r\n"),"]");break;case Boolean:b=String(a);break;case Date:b='"'.concat(a.getFullYear(),"-",d(a.getMonth()+1),"-",d(a.getDate()),"T",d(a.getHours()),":",d(a.getMinutes()),":",d(a.getSeconds()),'"');break;case Function:break;case Number:b=isFinite(a)?String(a):"null";break;case String:b='"'.concat(a.replace(c,h).replace(g,f),'"');break;default:m=0;b=[];for(z in a)void 0!==a[z]&&(e=this.encode(a[z],p+"\t",1))&&(b[m++]=p.concat('\t"',z.replace(c,h).replace(g,f),'":',e));b=1==n?"{\r\n".concat(b.join(",\r\n"),"\r\n",p,"}"):p.concat("{\r\n",b.join(",\r\n"),"\r\n",p,"}")}return b};var a={"\b":"b","\t":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\","/":"/"},d=function(a){return 10>a?"0".concat(a):a},b=["","000","00","0",""],c=/(\x5c|\x2F|\x22|[\x0c-\x0d]|[\x08-\x0a])/g,g=/([\x00-\x07]|\x0b|[\x0e-\x1f])/g,h=function(b,f){return"\\".concat(a[f])},f=function(a,f){var c=f.charCodeAt(0).toString(16);return"\\u".concat(b[c.length],c)},r={"boolean":function(){return Boolean},"function":function(){return Function},number:function(){return Number},object:function(a){return a instanceof a.constructor?a.constructor:null},string:function(){return String},undefined:function(){return null}}};TUI.env=TUI.env||{};TUI.env.parseUA=function(a){var d=function(a){var b=0;return parseFloat(a.replace(/\./g,function(){return 1==b++?"":"."}))},b=navigator,c={ie:0,opera:0,gecko:0,webkit:0,safari:0,chrome:0,mobile:null,air:0,ipad:0,iphone:0,ipod:0,ios:null,android:0,webos:0,caja:b&&b.cajaVersion,secure:!1,html5:!1,ontouch:!1,has3d:!1,clickEventUp:"mouseup",clickEventDown:"mousedown",clickEventMove:"mousemove",os:null};a=a||navigator&&navigator.userAgent;b=(b=window&&window.location)&&b.href;c.secure=b&&0===b.toLowerCase().indexOf("https");c.html5=!!document.createElement("canvas").getContext;c.ontouch="ontouchend"in document;c.has3d="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix;1<window.navigator.msMaxTouchPoints?(c.clickEventUp="pointerup",c.clickEventDown="pointerdown",c.clickEventMove="pointermove"):(c.clickEventUp=c.ontouch?"touchend":"mouseup",c.clickEventDown=c.ontouch?"touchstart":"mousedown",c.clickEventMove=c.ontouch?"touchmove":"mousemove");if(a){/windows|win32/i.test(a)?(c.os="windows",c.ontouch=!1,c.clickEventUp="mouseup",c.clickEventDown="mousedown",c.clickEventMove="mousemove"):/macintosh/i.test(a)?c.os="macintosh":/rhino/i.test(a)&&(c.os="rhino");/KHTML/.test(a)&&(c.webkit=1);if((b=a.match(/AppleWebKit([^\s]*)/))&&b[1]){c.webkit=d(b[1]);if(/ Mobile\//.test(a))c.mobile="Apple",(b=a.match(/OS ([^\s]*)/))&&b[1]&&(b=d(b[1].replace("_","."))),c.ios=b,c.ipad=c.ipod=c.iphone=0,(b=a.match(/iPad|iPod|iPhone/))&&b[0]&&(c[b[0].toLowerCase()]=c.ios);else{if(b=a.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))c.mobile=b[0];/webOS/.test(a)&&(c.mobile="WebOS",(b=a.match(/webOS\/([^\s]*);/))&&b[1]&&(c.webos=d(b[1])));if(/Android/.test(a)||/ipad; u;/.test(a))c.mobile="Android",(b=a.match(/Android ([^\s]*);/))&&b[1]&&(c.android=d(b[1]))}if((b=a.match(/Chrome\/([^\s]*)/))&&b[1])c.chrome=d(b[1]);else if(b=a.match(/AdobeAIR\/([^\s]*)/))c.air=b[0];else if(b=a.match(/Safari\/([^\s]*)/))c.safari=b[0]}if(!c.webkit)if((b=a.match(/Opera[\s\/]([^\s]*)/))&&b[1]){if(c.opera=d(b[1]),(b=a.match(/Version\/([^\s]*)/))&&b[1]&&(c.opera=d(b[1])),b=a.match(/Opera Mini[^;]*/))c.mobile=b[0]}else if((b=a.match(/MSIE\s([^;]*)/))&&b[1])c.ie=d(b[1]);else if(b=a.match(/Trident\/([^\s]*)/))c.ie=11,(b=a.match(/rv:([^\s\)]*)/))&&b[1]&&(c.ie=d(b[1]));else if(b=a.match(/Gecko\/([^\s]*)/))c.gecko=1,(b=a.match(/rv:([^\s\)]*)/))&&b[1]&&(c.gecko=d(b[1]));if(/wxwork/i.test(a))c.app="wxwork";else if(/MicroMessenger/i.test(a))c.app="MicroMessenger";else if(/welink/i.test(a))c.app="welink";else if(/DingTalk/i.test(a))c.app="DingTalk";else if(/weishao/i.test(a))c.app="Weishao";else{try{apiready=function(){c.app="APICloud"}}catch(g){}if(void 0==c.app)try{if(void 0!=top.api.appId||void 0!=api.appId)c.app="APICloud"}catch(g){}if(void 0==c.app)try{0<=window.frameElement.id.indexOf("widget")&&(c.app="Widget")}catch(g){}}}return c};TUI.env.ua=TUI.env.parseUA();TUI.env.log=[];TUI.env.us=null;TUI.env.os=[];TUI.env.cfg=null;TUI.env.desktop=0;TUI.env.login=null;TUI.env.mobile=null;if(window!=top)try{TUI.env.us=top.TUI.env.us,TUI.env.log=top.TUI.env.log,TUI.env.os=top.TUI.env.os,TUI.env.cfg=top.TUI.env.cfg,TUI.env.desktop=top.TUI.env.desktop,TUI.env.mobile=top.TUI.env.mobile}catch(a){}TUI.Utils=new function(){function a(a,b){a[b>>5]|=128<<24-b%32;a[(b+64>>9<<4)+15]=b;for(var f=Array(80),c=1732584193,e=-271733879,r=-1732584194,n=271733878,g=-1009589776,h=0;h<a.length;h+=16){for(var A=c,B=e,v=r,x=n,y=g,t=0;80>t;t++){if(16>t)f[t]=a[h+t];else{var u=f[t-3]^f[t-8]^f[t-14]^f[t-16];f[t]=u<<1|u>>>31}var u=c<<5|c>>>27,C;C=20>t?e&r|~e&n:40>t?e^r^n:60>t?e&r|e&n|r&n:e^r^n;u=d(d(u,C),d(d(g,f[t]),20>t?1518500249:40>t?1859775393:60>t?-1894007588:-899497514));g=n;n=r;r=e<<30|e>>>2;e=c;c=u}c=d(c,A);e=d(e,B);r=d(r,v);n=d(n,x);g=d(g,y)}return[c,e,r,n,g]}function d(a,b){var f=(a&65535)+(b&65535);return(a>>16)+(b>>16)+(f>>16)<<16|f&65535}function b(a){for(var b=[],f=0;f<8*a.length;f+=8)b[f>>5]|=(a.charCodeAt(f/8)&255)<<24-f%32;return b}function c(a){for(var b="",f=0;f<4*a.length;f++)b+="0123456789abcdef".charAt(a[f>>2]>>8*(3-f%4)+4&15)+"0123456789abcdef".charAt(a[f>>2]>>8*(3-f%4)&15);return b}var g=Object.prototype,h=["toString","valueOf"];this.isArray=function(a){return"[object Array]"===g.toString.apply(a)};this.isBoolean=function(a){return"boolean"===typeof a};this.isFunction=function(a){return"function"===typeof a||"[object Function]"===g.toString.apply(a)};this.isNull=function(a){return null===a};this.isNumber=function(a){return"number"===typeof a&&isFinite(a)};this.isObject=function(a){return a&&("object"===typeof a||this.isFunction(a))||!1};this.isString=function(a){return"string"===typeof a};this.isUndefined=function(a){return"undefined"===typeof a};this.trim=function(a){try{return a.replace(/^\s+|\s+$/g,"")}catch(r){return a}};this.isValue=function(a){return this.isObject(a)||this.isString(a)||this.isNumber(a)||this.isBoolean(a)};this.isDigit=function(a){return/^[0-9]{1,20}$/.exec(a)?!0:!1};this.isPasswd=function(a){return/^(\w){6,20}$/.exec(a)?!0:!1};this.isTel=function(a){return/^[+]{0,1}(\d){1,3}[ ]?([-]?((\d)|[ ]){1,12})+$/.exec(a)?!0:!1};this.isMobil=function(a){return/^[+]{0,1}(\d){1,3}[ ]?([-]?((\d)|[ ]){1,12})+$/.exec(a)?!0:!1};this.isIntranet=function(a){a=a.split(".");return"127"==a[0]||"10"==a[0]||"172"==a[0]||"192"==a[0]?!0:!1};this.isIPAddr=function(a){return/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])(\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])){3}$/.exec(a)?!0:!1};this.isUserCard=function(a){if(!/^(([1][1-5])|([2][1-3])|([3][1-7])|([4][1-6])|([5][0-4])|([6][1-5])|([7][1])|([8][1-2]))\d{4}(([1][9]\d{2})|([2]\d{3}))(([0][1-9])|([1][0-2]))(([0][1-9])|([1-2][0-9])|([3][0-1]))\d{3}[0-9xX]$/.test(a))return{flag:!1,birthDay:null,info:"\u8eab\u4efd\u8bc1\u53f7\u7801\u4e0d\u5408\u89c4"};var b=a.substr(6,4),c=a.substr(10,2),f=a.substr(12,2),e=Date.parse(c+"-"+f+"-"+b),d=Date.parse(new Date),b=(new Date(b,c,0)).getDate();if(e>d||f>b)return{flag:!1,birthDay:null,info:"\u51fa\u751f\u65e5\u671f\u4e0d\u5408\u89c4"};f=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2];a=a.split("");for(b=d=0;17>b;b++)d+=parseInt(a[b])*parseInt(f[b]);return a[17].toUpperCase()!="10X98765432".split("")[d%11].toUpperCase()?{flag:!1,birthDay:null,info:"\u8eab\u4efd\u8bc1\u6821\u9a8c\u7801\u4e0d\u5408\u89c4"}:{flag:!0,birthDay:e,info:"\u6821\u9a8c\u901a\u8fc7"}};this.isLegalDescribe=function(a){return/^[\u4e00-\u9fa5_\-\%\.\s\,\uff0c\u3002\uff01\u3001\u2026\u2026\u300a\u300b\u2014\uff08\uff09\u3010\u3011\uff1a\uff1b\u201c\u2018\u201d\u2019\uff1f\uffe5\u2103\(\)a-zA-Z0-9]+$/.exec(a)?!0:!1};this.isLegalName=function(a){return/^[\u4e00-\u9fa5_\-a-zA-Z0-9]+$/.exec(a)?!0:!1};this.isLegalTag=function(a){return/^[_\-a-zA-Z0-9]+$/.exec(a)?!0:!1};this.isLegalCode=function(a){return/^[_\-\.(\)a-zA-Z0-9]+$/.exec(a)?!0:!1};this._IEEnumFix=TUI.env.ua.ie?function(a,b){var c,f,e;for(c=0;c<h.length;c+=1)f=h[c],e=b[f],this.isFunction(e)&&e!=g[f]&&(a[f]=e)}:function(){};this.parseDate=function(a){if("string"==typeof a){var b=a.match(/^ *(\d{4})-(\d{1,2})-(\d{1,2}) *$/);if(b&&3<b.length)return new Date(parseInt(b[1],10),parseInt(b[2],10)-1,parseInt(b[3],10));if((b=a.match(/^ *(\d{4})-(\d{1,2})-(\d{1,2}) +(\d{1,2}):(\d{1,2}) *$/))&&5<b.length)return new Date(parseInt(b[1],10),parseInt(b[2],10)-1,parseInt(b[3],10),parseInt(b[4],10),parseInt(b[5],10));if((b=a.match(/^ *(\d{4})-(\d{1,2})-(\d{1,2}) +(\d{1,2}):(\d{1,2}):(\d{1,2}) *$/))&&6<b.length)return new Date(parseInt(b[1],10),parseInt(b[2],10)-1,parseInt(b[3],10),parseInt(b[4],10),parseInt(b[5],10),parseInt(b[6],10));if((b=a.match(/^ *(\d{4})-(\d{1,2})-(\d{1,2}) +(\d{1,2}):(\d{1,2}):(\d{1,2})\.(\d{1,9}) *$/))&&7<b.length)return new Date(parseInt(b[1],10),parseInt(b[2],10)-1,parseInt(b[3],10),parseInt(b[4],10),parseInt(b[5],10),parseInt(b[6],10),parseInt(b[7],10))}else if("number"==typeof a)return new Date(1E3*a);return null};this.dateDiff=function(a,b,c){switch(a){case "s":return parseInt((c-b)/1E3);case "n":return parseInt((c-b)/6E4);case "h":return parseInt((c-b)/36E5);case "d":return parseInt((c-b)/864E5);case "w":return parseInt((c-b)/6048E5);case "m":return c.getMonth()+1+12*(c.getFullYear()-b.getFullYear())-(b.getMonth()+1);case "y":return c.getFullYear()-b.getFullYear()}};this.dateMessage=function(a){var b=new Date,c=new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0,0),f=c.DateAdd("d",-1),e=c.DateAdd("d",-2),b=new Date(b.getFullYear(),0,1,0,0,0,0),d=c.DateAdd("d",1),g=a;if("string"==typeof a){var m=a.match(/^ *(\d{4})-(\d{1,2})-(\d{1,2}) *$/);m&&3<m.length&&(g=new Date(parseInt(m[1],10),parseInt(m[2],10)-1,parseInt(m[3],10)));(m=a.match(/^ *(\d{4})-(\d{1,2})-(\d{1,2}) +(\d{1,2}):(\d{1,2}) *$/))&&5<m.length&&(g=new Date(parseInt(m[1],10),parseInt(m[2],10)-1,parseInt(m[3],10),parseInt(m[4],10),parseInt(m[5],10)));(m=a.match(/^ *(\d{4})-(\d{1,2})-(\d{1,2}) +(\d{1,2}):(\d{1,2}):(\d{1,2}) *$/))&&6<m.length&&(g=new Date(parseInt(m[1],10),parseInt(m[2],10)-1,parseInt(m[3],10),parseInt(m[4],10),parseInt(m[5],10),parseInt(m[6],10)));(m=a.match(/^ *(\d{4})-(\d{1,2})-(\d{1,2}) +(\d{1,2}):(\d{1,2}):(\d{1,2})\.(\d{1,9}) *$/))&&7<m.length&&(g=new Date(parseInt(m[1],10),parseInt(m[2],10)-1,parseInt(m[3],10),parseInt(m[4],10),parseInt(m[5],10),parseInt(m[6],10),parseInt(m[7],10)))}else"number"==typeof a&&(g=new Date(1E3*a));return"string"==typeof g?g:g>d?g.Format("yyyy\u5e74MM\u6708"):g>c?g.Format("\u4eca\u5929 hh:mm:ss"):g>f?g.Format("\u6628\u5929 hh:mm:ss"):g>e?g.Format("\u524d\u5929 hh:mm:ss"):g>b?g.Format("MM\u6708dd\u65e5"):g.Format("yyyy\u5e74MM\u6708")};this.checkPassWord=function(a){var b=0;if(8>a.length)return b;/\d/.test(a)&&b++;/[a-z]/.test(a)&&b++;/[A-Z]/.test(a)&&b++;/\W/.test(a)&&b++;switch(b){case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4}};this.log=function(a,b,c){if(!TUI.Utils.isUndefined(a)){TUI.Utils.isUndefined(b)&&(b="info");TUI.Utils.isUndefined(c)&&(c=window.location.pathname);var f=new Date;1024<TUI.env.log.length&&TUI.env.log.shift();TUI.env.log.push({msg:f.Format("hh:mm:ss.S")+" "+a,cat:b,src:c,type:"text"})}};this.encode64=function(a){a=escape(a).replace(/\+/g,"%2B");var b="",c,f,e,g,d,m,h=0;do c=a.charCodeAt(h++),f=a.charCodeAt(h++),e=a.charCodeAt(h++),g=c>>2,c=(c&3)<<4|f>>4,d=(f&15)<<2|e>>6,m=e&63,isNaN(f)?d=m=64:isNaN(e)&&(m=64),b=b+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(g)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(m);while(h<a.length);return b};this.decode64=function(a){var b="",c,f,e,d,g,m=0;/[^A-Za-z0-9\+\/\=]/g.exec(a)&&alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/', and '\x3d'\nExpect errors in decoding.");a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");do c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".indexOf(a.charAt(m++)),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".indexOf(a.charAt(m++)),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".indexOf(a.charAt(m++)),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".indexOf(a.charAt(m++)),c=c<<2|f>>4,f=(f&15)<<4|d>>2,e=(d&3)<<6|g,b+=String.fromCharCode(c),64!=d&&(b+=String.fromCharCode(f)),64!=g&&(b+=String.fromCharCode(e));while(m<a.length);return unescape(b)};this.formatNumber=function(a,b){for(var c=a?a.toString().split("."):["0"],f=b?b.split("."):[""],e="",d=c[0],g=f[0],m=d.length-1,r=!1,h=g.length-1;0<=h;h--)switch(g.substr(h,1)){case "#":0<=m&&(e=d.substr(m--,1)+e);break;case "0":e=0<=m?d.substr(m--,1)+e:"0"+e;break;case ",":r=!0,e=","+e}if(0<=m)if(r)for(g=d.length;0<=m;m--)e=d.substr(m,1)+e,0<m&&0==(g-m)%3&&(e=","+e);else e=d.substr(0,m+1)+e;e+=".";d=1<c.length?c[1]:"";g=1<f.length?f[1]:"";for(h=m=0;h<g.length;h++)switch(g.substr(h,1)){case "#":m<d.length&&(e+=d.substr(m++,1));break;case "0":e=m<d.length?e+d.substr(m++,1):e+"0"}return e.replace(/^,+/,"").replace(/\.$/,"")};this.computerSlope=function(a){for(var b=0,c,d,e,g,f=g=c=0;f<a.length;f++)null!=a[f][0]&&null!=a[f][1]&&(c+=a[f][0],g+=a[f][0]*a[f][0],b++);for(f=e=d=0;f<a.length;f++)null!=a[f][0]&&null!=a[f][1]&&(d+=a[f][1],e+=a[f][0]*a[f][1]);return(b*e-c*d)/(b*g-c*c)};this.floatPrecision=function(a,b){return Math.round(a*Math.pow(10,b))/Math.pow(10,b)};this.floatFormat=function(a,b){var c="#0.";if(0<b)for(var d=0;d<b;d++)c+="0";else c="#0";return this.formatNumber(a,c)};this.parseBoolean=function(a){switch(String(a).toLowerCase()){case "true":case "1":case "yes":case "y":return!0;case "false":case "0":case "no":case "n":return!1}};this.getTagPathLeft=this.getOpcPathName=function(a,b){var c=a.split("."),d=[];b>=c.length&&(b=c.length-1);for(l=b;l<c.length;l++)d[d.length]=c[l];return d.join(".")};this.getTagPathRight=this.getOpcPathTag=function(a,b){var c=a.split("."),d=[];b>=c.length&&(b=c.length-1);for(l=0;l<c.length-b;l++)d[d.length]=c[l];return d.join(".")};this.getLeftPathTag=function(a,b){var c=a.split("."),d=[];for(l=0;l<b;l++)d[d.length]=c[l];return d.join(".")};this.getRightPathName=function(a,b){var c=a.split("."),d=[];for(l=b;l<c.length;l++)d[d.length]=c[l];return d.join(".")};this.getTagNameLeft=function(a,b){var c=a.split("."),d=[];b>c.length&&(b=c.length);for(l=0;l<b;l++)d[d.length]=c[l];return d.join(".")};this.getTagNameRight=function(a,b){var c=a.split("."),d=[];b>c.length&&(b=c.length);for(l=c.length-b;l<c.length;l++)d[d.length]=c[l];return d.join(".")};this.getTagNameMid=function(a,b,c){a=a.split(".");var d=[];b>a.length&&(b=a.length);c>a.length&&(c=a.length);for(l=b;l<a.length-c;l++)d[d.length]=a[l];return d.join(".")};this.playUserSound=function(a){void 0!=TUI.env.wx&&1==TUI.env.wx.ready&&wx.downloadVoice({serverId:a,isShowProgressTips:0,success:function(a){wx.playVoice({localId:a.localId})}})};this.hex_sha1=function(d){return c(a(b(d),8*d.length))};this.hex_hmac_sha1=function(d,g){var f,h=b(d);16<h.length&&(h=a(h,8*d.length));var e=Array(16);f=Array(16);for(var p=0;16>p;p++)e[p]=h[p]^909522486,f[p]=h[p]^1549556828;h=a(e.concat(b(g)),512+8*g.length);f=a(f.concat(h),672);return c(f)};this.dump=function(a,b,c){function d(a,b){var c,f=0,h="";b=g(a);switch(b){case "regexp":var n=b,h=h+("\x3ctable"+e(n,"table")+'\x3e\x3ctr\x3e\x3cth colspan\x3d"2"'+e(n,"th")+"\x3e"+n+"\x3c/th\x3e\x3c/tr\x3e"),h=h+('\x3ctr\x3e\x3ctd colspan\x3d"2"'+e(n,"td-value")+"\x3e\x3ctable"+e("arguments","table")+"\x3e\x3ctr\x3e\x3ctd"+e("arguments","td-key")+"\x3e\x3ci\x3eRegExp: \x3c/i\x3e\x3c/td\x3e\x3ctd"+e(b,"td-value")+"\x3e"+a+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e");f++;break;case "date":n=b;h+="\x3ctable"+e(n,"table")+'\x3e\x3ctr\x3e\x3cth colspan\x3d"2"'+e(n,"th")+"\x3e"+n+"\x3c/th\x3e\x3c/tr\x3e";h+='\x3ctr\x3e\x3ctd colspan\x3d"2"'+e(n,"td-value")+"\x3e\x3ctable"+e("arguments","table")+"\x3e\x3ctr\x3e\x3ctd"+e("arguments","td-key")+"\x3e\x3ci\x3eDate: \x3c/i\x3e\x3c/td\x3e\x3ctd"+e(b,"td-value")+"\x3e"+a+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e";f++;break;case "function":var n=b,q=a.toString().match(/^.*function.*?\((.*?)\)/im),q=null==q||"undefined"==typeof q[1]||""==q[1]?"none":q[1],h=h+("\x3ctable"+e(n,"table")+'\x3e\x3ctr\x3e\x3cth colspan\x3d"2"'+e(n,"th")+"\x3e"+n+"\x3c/th\x3e\x3c/tr\x3e"),h=h+('\x3ctr\x3e\x3ctd colspan\x3d"2"'+e(n,"td-value")+"\x3e\x3ctable"+e("arguments","table")+"\x3e\x3ctr\x3e\x3ctd"+e("arguments","td-key")+"\x3e\x3ci\x3eArguments: \x3c/i\x3e\x3c/td\x3e\x3ctd"+e(b,"td-value")+"\x3e"+q+"\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd"+e("arguments","td-key")+"\x3e\x3ci\x3eFunction: \x3c/i\x3e\x3c/td\x3e\x3ctd"+e(b,"td-value")+"\x3e"+a+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e");f++;break;case "domelement":n=b,h+="\x3ctable"+e(n,"table")+'\x3e\x3ctr\x3e\x3cth colspan\x3d"2"'+e(n,"th")+"\x3e"+n+"\x3c/th\x3e\x3c/tr\x3e",h+="\x3ctr\x3e\x3ctd"+e(n,"td-key")+"\x3e\x3ci\x3eNode Name: \x3c/i\x3e\x3c/td\x3e\x3ctd"+e(b,"td-value")+"\x3e"+a.nodeName.toLowerCase()+"\x3c/td\x3e\x3c/tr\x3e",h+="\x3ctr\x3e\x3ctd"+e(n,"td-key")+"\x3e\x3ci\x3eNode Type: \x3c/i\x3e\x3c/td\x3e\x3ctd"+e(b,"td-value")+"\x3e"+a.nodeType+"\x3c/td\x3e\x3c/tr\x3e",h+="\x3ctr\x3e\x3ctd"+e(n,"td-key")+"\x3e\x3ci\x3eNode Value: \x3c/i\x3e\x3c/td\x3e\x3ctd"+e(b,"td-value")+"\x3e"+a.nodeValue+"\x3c/td\x3e\x3c/tr\x3e",h+="\x3ctr\x3e\x3ctd"+e(n,"td-key")+"\x3e\x3ci\x3einnerHTML: \x3c/i\x3e\x3c/td\x3e\x3ctd"+e(b,"td-value")+"\x3e"+a.innerHTML+"\x3c/td\x3e\x3c/tr\x3e",f++}if(/object|array/.test(b))for(c in a)n=g(a[c]),1>f&&(h+="\x3ctable"+e(b,"table")+'\x3e\x3ctr\x3e\x3cth colspan\x3d"2"'+e(b,"th")+"\x3e"+b+"\x3c/th\x3e\x3c/tr\x3e",f++),h="object"==typeof a[c]&&null!=a[c]?h+("\x3ctr\x3e\x3ctd"+e(b,"td-key")+"\x3e"+c+(m?" ["+n+"]":"")+"\x3c/td\x3e\x3ctd"+e(b,"td-value")+"\x3e"+d(a[c],n)+"\x3c/td\x3e\x3c/tr\x3e"):"function"==typeof a[c]?h+("\x3ctr\x3e\x3ctd"+e(b,"td-key")+"\x3e"+c+(m?" ["+n+"]":"")+"\x3c/td\x3e\x3ctd"+e(b,"td-value")+"\x3e"+d(a[c],n)+"\x3c/td\x3e\x3c/tr\x3e"):h+("\x3ctr\x3e\x3ctd"+e(b,"td-key")+"\x3e"+c+(m?" ["+n+"]":"")+"\x3c/td\x3e\x3ctd"+e(b,"td-value")+"\x3e"+a[c]+"\x3c/td\x3e\x3c/tr\x3e");0==f&&(h+="\x3ctable"+e(b,"table")+'\x3e\x3ctr\x3e\x3cth colspan\x3d"2"'+e(b,"th")+"\x3e"+b+" [empty]\x3c/th\x3e\x3c/tr\x3e");return h+"\x3c/table\x3e"}function e(a,b){var c="";switch(a){case "string":case "number":case "boolean":case "undefined":case "object":switch(b){case "table":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;cell-spacing:2px;background-color:#0000cc;"';break;case "th":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;text-align:left;color: white;padding: 5px;vertical-align :top;cursor:hand;cursor:pointer;background-color:#4444cc;"onClick\x3d"tTable(this);" title\x3d"click to collapse"';break;case "td-key":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;vertical-align:top;padding:3px;background-color:#ccddff;cursor:hand;cursor:pointer;"onClick\x3d"tRow(this);" title\x3d"click to collapse"';break;case "td-value":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;vertical-align:top;padding:3px;background-color:#fff;"'}break;case "array":switch(b){case "table":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;cell-spacing:2px;background-color:#006600;"';break;case "th":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;text-align:left;color: white;padding: 5px;vertical-align :top;cursor:hand;cursor:pointer;background-color:#009900;"onClick\x3d"tTable(this);" title\x3d"click to collapse"';break;case "td-key":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;vertical-align:top;padding:3px;background-color:#ccffcc;cursor:hand;cursor:pointer;"onClick\x3d"tRow(this);" title\x3d"click to collapse"';break;case "td-value":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;vertical-align:top;padding:3px;background-color:#fff;"'}break;case "function":switch(b){case "table":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;cell-spacing:2px;background-color:#aa4400;"';break;case "th":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;text-align:left;color: white;padding: 5px;vertical-align :top;cursor:hand;cursor:pointer;background-color:#cc6600;"onClick\x3d"tTable(this);" title\x3d"click to collapse"';break;case "td-key":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;vertical-align:top;padding:3px;background-color:#fff;cursor:hand;cursor:pointer;"onClick\x3d"tRow(this);" title\x3d"click to collapse"';break;case "td-value":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;vertical-align:top;padding:3px;background-color:#fff;"'}break;case "arguments":switch(b){case "table":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;cell-spacing:2px;background-color:#dddddd;cell-spacing:3;"';break;case "td-key":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;text-align:left;color: white;padding: 5px;vertical-align :top;cursor:hand;cursor:pointer;background-color:#eeeeee;color:#000000;cursor:hand;cursor:pointer;"onClick\x3d"tRow(this);" title\x3d"click to collapse"'}break;case "regexp":switch(b){case "table":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;cell-spacing:2px;background-color:#CC0000;cell-spacing:3;"';break;case "th":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;text-align:left;color: white;padding: 5px;vertical-align :top;cursor:hand;cursor:pointer;background-color:#FF0000;"onClick\x3d"tTable(this);" title\x3d"click to collapse"';break;case "td-key":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;text-align:left;color: white;padding: 5px;vertical-align :top;cursor:hand;cursor:pointer;background-color:#FF5757;color:#000000;cursor:hand;cursor:pointer;"onClick\x3d"tRow(this);" title\x3d"click to collapse"';break;case "td-value":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;vertical-align:top;padding:3px;background-color:#fff;"'}break;case "date":switch(b){case "table":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;cell-spacing:2px;background-color:#663399;cell-spacing:3;"';break;case "th":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;text-align:left;color: white;padding: 5px;vertical-align :top;cursor:hand;cursor:pointer;background-color:#9966CC;"onClick\x3d"tTable(this);" title\x3d"click to collapse"';break;case "td-key":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;text-align:left;color: white;padding: 5px;vertical-align :top;cursor:hand;cursor:pointer;background-color:#B266FF;color:#000000;cursor:hand;cursor:pointer;"onClick\x3d"tRow(this);" title\x3d"click to collapse"';break;case "td-value":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;vertical-align:top;padding:3px;background-color:#fff;"'}break;case "domelement":switch(b){case "table":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;cell-spacing:2px;background-color:#FFCC33;cell-spacing:3;"';break;case "th":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;text-align:left;color: white;padding: 5px;vertical-align :top;cursor:hand;cursor:pointer;background-color:#FFD966;"onClick\x3d"tTable(this);" title\x3d"click to collapse"';break;case "td-key":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;text-align:left;color: white;padding: 5px;vertical-align :top;cursor:hand;cursor:pointer;background-color:#FFF2CC;color:#000000;cursor:hand;cursor:pointer;"onClick\x3d"tRow(this);" title\x3d"click to collapse"';break;case "td-value":c=' style\x3d"font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;vertical-align:top;padding:3px;background-color:#fff;"'}}return c}function g(a){var b=typeof a;if("function"==b){var c=a.toString();if(/^\/.*\/[gi]??[gi]??$/.test(c))return"regexp";/^\[object.*\]$/i.test(c)&&(b="object")}if("object"!=b)return b;switch(a){case null:return"null";case window:return"window";case document:return document;case window.event:return"event"}if(window.event&&event.type==a.type)return"event";c=a.constructor;if(null!=c)switch(c){case Array:b="array";break;case Date:return"date";case RegExp:return"regexp";case Object:b="object";break;case ReferenceError:return"error";default:if(null!=c.toString().match(/\s*function (.*)\(/))return"object"}c=a.nodeType;if(null!=c)switch(c){case 1:if(null==a.item)return"domelement";break;case 3:return"string"}if(null!=a.toString&&(a=a.toString().match(/^\[object (.*)\]$/i),null!=a))switch(a=a[1],a.toLowerCase()){case "event":return"event";case "nodelist":case "htmlcollection":case "elementarray":return"array";case "htmldocument":return"htmldocument"}return b}TUI.Utils.isUndefined(b)&&(b="info");TUI.Utils.isUndefined(c)&&(c=window.location.pathname);var f=new Date;1024<TUI.env.log.length&&TUI.env.log.shift();var m="undefined"==typeof showTypes?!0:showTypes;a=/string|number|undefined|boolean/.test(typeof a)||null==a?a:d(a,typeof a);TUI.env.log.push({msg:a,cat:b,src:f.Format("hh:mm:ss.S")+" "+b+" ["+c+"]",type:"html"})}};TUI.Comet=new function(){var a=[],d=Math.floor((new Date).getTime()/1E3),b=0,c=this,g=new XMLHttpRequest,h=new XMLHttpRequest;this.errorText="";this.cometStatus="close";this.taskCount=0;this.connect=function(){if(h){if("close"!=c.cometStatus)return!0;d++;try{h.open("GET","cometevent.srv?CmdType\x3dConnect\x26TunnelID\x3d"+d+"\x26CometID\x3d0\x26ReqType\x3dall\x26ReqStr\x3dall",!1);h.setRequestHeader("If-Modified-Since","0");h.send(null);if(7==parseInt(void 0==h.responseXML.documentElement.attributes.StatusCode?h.responseXML.documentElement.attributes[0].value:h.responseXML.documentElement.attributes.StatusCode.value))return c.cometStatus="connect",!0;c.errorText=decodeURIComponent(h.responseXML.getElementsByTagName("CometData")[0].firstChild.nodeValue).replace(/\+/g," ")}catch(f){c.errorText=f.message}}c.close();return!1};this.onlisten=function(){if("onlisten"==c.cometStatus)return!0;try{return g.open("GET","cometevent.srv?CmdType\x3dListen\x26TunnelID\x3d"+d+"\x26CometID\x3d0\x26ReqType\x3dall\x26ReqStr\x3dall",!0),g.setRequestHeader("If-Modified-Since","0"),g.onreadystatechange=function(){if(4==g.readyState&&200==g.status)if(""==g.responseText)c.onlisten();else if(parseInt(void 0==g.responseXML.documentElement.attributes.TunnelID?g.responseXML.documentElement.attributes[2].value:g.responseXML.documentElement.attributes.TunnelID.value)!=d)c.errorText="Comet\u4fa6\u542c\u6570\u636e\u5f02\u5e38",c.close();else{var b=parseInt(void 0==g.responseXML.documentElement.attributes.StatusCode?g.responseXML.documentElement.attributes[0].value:g.responseXML.documentElement.attributes.StatusCode.value);if(4==b){c.cometStatus="data";for(i=0;i<a.length;i++)if(a[i].cometID==parseInt(void 0==g.responseXML.documentElement.attributes.CometID?g.responseXML.documentElement.attributes[3].value:g.responseXML.documentElement.attributes.CometID.value)){c.onchange=a[i].fn;if("function"==typeof c.onchange)c.onchange(decodeURIComponent(g.responseXML.getElementsByTagName("CometData")[0].firstChild.nodeValue).replace(/\+/g," "));break}c.onlisten()}else if(2==b){for(i=0;i<a.length;i++)if(a[i].cometID==parseInt(void 0==g.responseXML.documentElement.attributes.CometID?g.responseXML.documentElement.attributes[3].value:g.responseXML.documentElement.attributes.CometID.value)){c.onchange=a[i].fn;if("function"==typeof c.onchange)c.onchange(decodeURIComponent(g.responseXML.getElementsByTagName("CometData")[0].firstChild.nodeValue).replace(/\+/g," "));c.cometStatus="leave";c.taskCount--;a.splice(i,1);break}c.onlisten()}else 5==b?(c.cometStatus="close",c.taskCount=0,a=[]):(c.errorText="Comet\u4fa6\u542c\u901a\u8baf\u5f02\u5e38",c.close())}},g.send(null),c.cometStatus="onlisten",!0}catch(f){c.errorText=f.message}return!1};this.onchange=function(a){c.cometStatus="data"};this.close=function(){if(h)try{h.open("GET","cometevent.srv?CmdType\x3dClose\x26TunnelID\x3d"+d+"\x26CometID\x3d0\x26ReqType\x3dall\x26ReqStr\x3dall",!1),h.setRequestHeader("If-Modified-Since","0"),h.send(null),7==parseInt(void 0==h.responseXML.documentElement.attributes.StatusCode?h.responseXML.documentElement.attributes[0].value:h.responseXML.documentElement.attributes.StatusCode.value)?(c.cometStatus="close",c.taskCount=0,a=[]):c.errorText=decodeURIComponent(h.responseXML.getElementsByTagName("CometData")[0].firstChild.nodeValue).replace(/\+/g," ")}catch(f){c.errorText=f.message}};this.addsrv=function(g,r,q){if(h)try{b++;h.open("GET","cometevent.srv?CmdType\x3dJoin\x26TunnelID\x3d"+d+"\x26CometID\x3d"+b+"\x26ReqType\x3d"+g+"\x26ReqStr\x3d"+encodeURIComponent(r),!1);h.setRequestHeader("If-Modified-Since","0");h.send(null);if(7==parseInt(void 0==h.responseXML.documentElement.attributes.StatusCode?h.responseXML.documentElement.attributes[0].value:h.responseXML.documentElement.attributes.StatusCode.value))return c.cometStatus="join",c.taskCount++,a.push({reqType:g,reqStr:r,fn:q,cometID:parseInt(void 0==h.responseXML.documentElement.attributes.CometID?h.responseXML.documentElement.attributes[3].value:h.responseXML.documentElement.attributes.CometID.value)}),!0;c.errorText=decodeURIComponent(h.responseXML.getElementsByTagName("CometData")[0].firstChild.nodeValue).replace(/\+/g," ")}catch(w){c.errorText=w.message}return!1};this.removesrv=function(b,g){if(h)try{for(i=0;i<a.length;i++)if(a[i].reqType=b&&a[i].reqStr==g){h.open("GET","cometevent.srv?CmdType\x3dLeave\x26TunnelID\x3d"+d+"\x26CometID\x3d"+a[i].cometID+"\x26ReqType\x3d"+b+"\x26ReqStr\x3d"+encodeURIComponent(g),!1);h.setRequestHeader("If-Modified-Since","0");h.send(null);if(7==parseInt(void 0==h.responseXML.documentElement.attributes.StatusCode?h.responseXML.documentElement.attributes[0].value:h.responseXML.documentElement.attributes.StatusCode.value))return c.cometStatus="leave",c.taskCount--,a.splice(i,1),!0;c.errorText=decodeURIComponent(h.responseXML.getElementsByTagName("CometData")[0].firstChild.nodeValue).replace(/\+/g," ")}}catch(q){c.errorText=q.message}return!1}};TUI.Debug=new function(){this.m_CometID=this.m_ReqType=-1;this.datastatus=this.datareadyState=0;this.dataObject=new XMLHttpRequest;this.eventObject=new XMLHttpRequest;this.errorText="";this.CometArray=[];this.CometMaxID=Math.floor((new Date).getTime()/1E3);this.projectspace="";this.onchange=function(){};this.OnConnect=function(a){this.projectspace=a;if(this.eventObject)try{return this.eventObject.open("GET","/project/"+this.projectspace+"/cometevent.srv?CmdType\x3d5\x26ReqType\x3d0\x26CometID\x3d0\x26ReqStr\x3dall",!1),this.eventObject.setRequestHeader("If-Modified-Since","0"),this.eventObject.send(null),7!=(void 0==this.eventObject.responseXML.documentElement.attributes.StatusCode?this.eventObject.responseXML.documentElement.attributes[0].value:this.eventObject.responseXML.documentElement.attributes.StatusCode.value)?(this.errorText="\u8fde\u63a5"+a+"\u8c03\u8bd5\u5668\u5931\u8d25\uff0c\u8bf7\u5148\u6253\u5f00\u7cfb\u7edf\uff01",!1):!0}catch(d){this.errorText=d.message}return!1};this.OnListen=function(){this.datastatus=this.datareadyState=0;this.errorText="";if(""==this.projectspace)return!1;if(this.dataObject)try{this.dataObject.open("GET","/project/"+this.projectspace+"/cometdata.srv",!0);this.dataObject.setRequestHeader("If-Modified-Since","0");var a=this;this.dataObject.onreadystatechange=function(){if(a.dataObject&&4==a.dataObject.readyState&&200==a.dataObject.status)if(""==a.dataObject.responseText)a.OnListen();else{var d=void 0==a.dataObject.responseXML.documentElement.attributes.StatusCode?a.dataObject.responseXML.documentElement.attributes[0].value:a.dataObject.responseXML.documentElement.attributes.StatusCode.value;a.m_ReqType=void 0==a.dataObject.responseXML.documentElement.attributes.ReqType?a.dataObject.responseXML.documentElement.attributes[1].value:a.dataObject.responseXML.documentElement.attributes.ReqType.value;a.m_CometID=void 0==a.dataObject.responseXML.documentElement.attributes.CometID?a.dataObject.responseXML.documentElement.attributes[2].value:a.dataObject.responseXML.documentElement.attributes.CometID.value;if(4==d){d=a.CometArray.length;for(i=0;i<d;i++)if(a.CometArray[i][3]==a.m_CometID&&a.CometArray[i][0]==a.m_ReqType){if(0==a.m_ReqType||1==a.m_ReqType||3==a.m_ReqType)a.CometArray[i][4]=unescape(a.dataObject.responseXML.getElementsByTagName("CometData")[0].firstChild.nodeValue);a.onchange=a.CometArray[i][1];if("function"==typeof a.onchange)if(a.datareadyState=4,a.datastatus=200,0!=a.m_ReqType&&1!=a.m_ReqType&&3!=a.m_ReqType)a.onchange(a);else a.onchange(a.CometArray[i][4]);break}a.OnListen()}}};this.dataObject.send(null);return!0}catch(d){this.errorText=d.message}return!1};this.OnClose=function(){this.errorText="";if(""==this.projectspace)return!1;if(this.eventObject)try{return this.eventObject.open("GET","/project/"+this.projectspace+"/cometevent.srv?CmdType\x3d5\x26ReqType\x3d0\x26CometID\x3d0\x26ReqStr\x3dall",!1),this.eventObject.setRequestHeader("If-Modified-Since","0"),this.eventObject.send(null),7==(void 0==this.eventObject.responseXML.documentElement.attributes.StatusCode?this.eventObject.responseXML.documentElement.attributes[0].value:this.eventObject.responseXML.documentElement.attributes.StatusCode.value)&&this.CometArray.splice(0,this.CometArray.length),!0}catch(a){this.errorText=a.message}return!1};this.AddDebugSrv=function(a,d,b){this.errorText="";if(""==this.projectspace)return!1;if(this.eventObject)try{var c=this.CometArray.length;a=a+"\x26"+d;this.eventObject.open("GET","/project/"+this.projectspace+"/cometevent.srv?CmdType\x3d1\x26ReqType\x3d4\x26CometID\x3d"+this.CometMaxID+"\x26ReqStr\x3d"+a,!1);this.eventObject.setRequestHeader("If-Modified-Since","0");this.eventObject.send(null);7==(void 0==this.eventObject.responseXML.documentElement.attributes.StatusCode?this.eventObject.responseXML.documentElement.attributes[0].value:this.eventObject.responseXML.documentElement.attributes.StatusCode.value)&&(this.CometArray[c]=[4,b,a,this.CometMaxID],this.CometMaxID++);return!0}catch(g){this.errorText=g.message}return!1};this.RemoveDebugSrv=function(a,d){this.errorText="";if(""==this.projectspace)return!1;if(this.eventObject)try{var b=this.CometArray.length,c=a+"\x26"+d;for(i=0;i<b;i++)if(4==this.CometArray[i][0]&&this.CometArray[i][2]==c)return this.eventObject.open("GET","/project/"+this.projectspace+"/cometevent.srv?CmdType\x3d2\x26ReqType\x3d4\x26CometID\x3d"+this.CometArray[i][3]+"\x26ReqStr\x3d"+c,!1),this.eventObject.setRequestHeader("If-Modified-Since","0"),this.eventObject.send(null),7==(void 0==this.eventObject.responseXML.documentElement.attributes.StatusCode?this.eventObject.responseXML.documentElement.attributes[0].value:this.eventObject.responseXML.documentElement.attributes.StatusCode.value)&&this.CometArray.splice(i,1),!0}catch(g){this.errorText=g.message}return!1};this.GetItemCount=function(){if(4==this.datareadyState&&200==this.datastatus)try{var a=0,d;for(d=0;d<this.dataObject.responseXML.documentElement.childNodes.length;d++)3!=this.dataObject.responseXML.documentElement.childNodes[d].nodeType&&a++;return a}catch(b){this.datastatus=this.datareadyState=0}return 0};this.GetLogIPAddr=function(a){return 4==this.m_ReqType&&4==this.datareadyState&&200==this.datastatus&&a<this.dataObject.responseXML.documentElement.childNodes.length&&this.dataObject.responseXML.getElementsByTagName("IPAddr")[a].firstChild?this.dataObject.responseXML.getElementsByTagName("IPAddr")[a].firstChild.nodeValue:"0.0.0.0"};this.GetLogUserID=function(a){return 4==this.m_ReqType&&4==this.datareadyState&&200==this.datastatus&&a<this.dataObject.responseXML.documentElement.childNodes.length&&this.dataObject.responseXML.getElementsByTagName("UserID")[a].firstChild?this.dataObject.responseXML.getElementsByTagName("UserID")[a].firstChild.nodeValue:"system"};this.GetLogSrc=function(a){return 4==this.m_ReqType&&4==this.datareadyState&&200==this.datastatus&&a<this.dataObject.responseXML.documentElement.childNodes.length&&this.dataObject.responseXML.getElementsByTagName("DebugName")[a].firstChild?this.dataObject.responseXML.getElementsByTagName("DebugName")[a].firstChild.nodeValue:null};this.GetLogLevel=function(a){return 4==this.m_ReqType&&4==this.datareadyState&&200==this.datastatus&&a<this.dataObject.responseXML.documentElement.childNodes.length&&this.dataObject.responseXML.getElementsByTagName("DebugLevel")[a].firstChild?this.dataObject.responseXML.getElementsByTagName("DebugLevel")[a].firstChild.nodeValue:null};this.GetLogTime=function(a){return 4==this.m_ReqType&&4==this.datareadyState&&200==this.datastatus&&a<this.dataObject.responseXML.documentElement.childNodes.length&&this.dataObject.responseXML.getElementsByTagName("Time")[a].firstChild?this.dataObject.responseXML.getElementsByTagName("Time")[a].firstChild.nodeValue:null};this.GetLogText=function(a){return 4==this.m_ReqType&&4==this.datareadyState&&200==this.datastatus&&a<this.dataObject.responseXML.documentElement.childNodes.length&&this.dataObject.responseXML.getElementsByTagName("Log")[a].firstChild?unescape(this.dataObject.responseXML.getElementsByTagName("Log")[a].firstChild.nodeValue):null}};TUI.APP=new function(){this.Close=function(){null!=TUI.env.os[TUI.env.desktop-1].ModalWindwos&&TUI.env.os[TUI.env.desktop-1].ModalWindwos.close();for(i=0;i<TUI.env.os[TUI.env.desktop-1].WindowHandle.length;i++)if(TUI.env.os[TUI.env.desktop-1].WindowHandle[i][1]==this.AppID){TUI.env.os[TUI.env.desktop-1].WindowHandle[i][0].close();break}};this.Min=function(){null!=TUI.env.os[TUI.env.desktop-1].ModalWindwos&&TUI.env.os[TUI.env.desktop-1].ModalWindwos.hide();for(i=0;i<TUI.env.os[TUI.env.desktop-1].WindowHandle.length;i++)if(TUI.env.os[TUI.env.desktop-1].WindowHandle[i][1]==this.AppID){TUI.env.os[TUI.env.desktop-1].WindowHandle[i][0].hide();break}};this.Max=function(){null!=TUI.env.os[TUI.env.desktop-1].ModalWindwos&&TUI.env.os[TUI.env.desktop-1].ModalWindwos.max();for(i=0;i<TUI.env.os[TUI.env.desktop-1].WindowHandle.length;i++)if(TUI.env.os[TUI.env.desktop-1].WindowHandle[i][1]==this.AppID){TUI.env.os[TUI.env.desktop-1].WindowHandle[i][0].max();break}};this.Normal=function(){null!=TUI.env.os[TUI.env.desktop-1].ModalWindwos&&TUI.env.os[TUI.env.desktop-1].ModalWindwos.normal();for(i=0;i<TUI.env.os[TUI.env.desktop-1].WindowHandle.length;i++)if(TUI.env.os[TUI.env.desktop-1].WindowHandle[i][1]==this.AppID){TUI.env.os[TUI.env.desktop-1].WindowHandle[i][0].normal();break}};this.FullScreen=function(){null!=TUI.env.os[TUI.env.desktop-1].ModalWindwos&&TUI.env.os[TUI.env.desktop-1].ModalWindwos.fullscreen();for(i=0;i<TUI.env.os[TUI.env.desktop-1].WindowHandle.length;i++)if(TUI.env.os[TUI.env.desktop-1].WindowHandle[i][1]==this.AppID){TUI.env.os[TUI.env.desktop-1].WindowHandle[i][0].fullscreen();break}};this.OpenWindow=function(a,d,b){if(TUI.env.os[0].checkHandle(a))TUI.env.os[0].activeHandle(a);else for(var c=0;c<TUI.env.cfg.system.installApp.length;c++)if(TUI.env.cfg.system.installApp[c].appid==a){a=new Dialog({container:TUI.env.os[0].container,type:"iframe",value:TUI.env.cfg.system.installApp[c].app.launch.local_path},{title:TUI.env.cfg.system.installApp[c].name,taskImg:TUI.env.cfg.system.installApp[c].urlPath+"/"+TUI.env.cfg.system.installApp[c].icons.logo,handle:TUI.env.os[TUI.env.desktop-1],appid:TUI.env.cfg.system.installApp[c].appid,urlPath:TUI.env.cfg.system.installApp[c].urlPath,afterShow:function(){},afterHide:function(){this.handle.hideHandle(TUI.env.cfg.system.installApp[c].appid)},afterClose:function(){this.handle.delHandle(TUI.env.cfg.system.installApp[c].appid)},afterSwitch:function(){this.handle.switchHandle(TUI.env.cfg.system.installApp[c].appid)},modal:!1,center:!0,width:TUI.env.cfg.system.installApp[c].app.launch.width,height:TUI.env.cfg.system.installApp[c].app.launch.height});a.show();TUI.env.os[TUI.env.desktop-1].addHandle(a,TUI.env.cfg.system.installApp[c].name,TUI.env.cfg.system.installApp[c].urlPath+"/"+TUI.env.cfg.system.installApp[c].icons.logo,TUI.env.cfg.system.installApp[c].appid);break}}};TUI.SVG=function(a,d){var b=null,c=null,g=null,h=null,f=null,r=null,q=0;return{init:function(b){TUI.SVG.sceneHandle=this;this.container=a;this.config=d?d:{};this.fn=b;void 0==this.config.server&&(this.config.server="");void 0==this.config.background&&(this.config.background="transparent");$("#"+this.container).html('\x3cembed id\x3d"svgMap_'+this.config.tag+'"  src\x3d"'+this.config.server+this.config.url+'"  style\x3d"width:100%; height:100%;background: '+this.config.background+';"  onload\x3d"TUI.SVG.sceneHandle.load();" wmode\x3d"transparent" type\x3d"image/svg+xml"\x3e\x3c/embed\x3e\x3cdiv class\x3d"svg-tipinfo"\x3e\x3c/div\x3e\x3cdiv class\x3d"map-control" style\x3d"top:10px!important;left:10px!important;"\x3e\t\t\x3cdiv class\x3d"map-arrow"\x3e\t\t\t\x3ca class\x3d"left" title\x3d"\u5411\u5de6\u5e73\u79fb" href\x3d"#left" onclick\x3d"return false;"\x3eLeft\x3c/a\x3e\t\t\t\x3ca class\x3d"right" title\x3d"\u5411\u53f3\u5e73\u79fb" href\x3d"#right" onclick\x3d"return false;"\x3eRight\x3c/a\x3e\t\t\t\x3ca class\x3d"center" title\x3d"\u5c45\u4e2d" href\x3d"#center" onclick\x3d"return false;"\x3eCenter\x3c/a\x3e\t\t\t\x3ca class\x3d"up" title\x3d"\u5411\u4e0a\u5e73\u79fb" href\x3d"#up" onclick\x3d"return false;"\x3eUp\x3c/a\x3e\t\t\t\x3ca class\x3d"down" title\x3d"\u5411\u4e0b\u5e73\u79fb" href\x3d"#down" onclick\x3d"return false;"\x3eDown\x3c/a\x3e\t\t\x3c/div\x3e\t\t\x3cdiv class\x3d"map-scale"\x3e\t\t\t\x3ca class\x3d"zoom" title\x3d"\u653e\u5927" href\x3d"#zoom" onclick\x3d"return false;"\x3eZoom\x3c/a\x3e\t\t\t\x3ca class\x3d"back" title\x3d"\u7f29\u5c0f" href\x3d"#zoom_out" onclick\x3d"return false;"\x3eBack\x3c/a\x3e\t\t\x3c/div\x3e\t\t\x3cdiv class\x3d"map-area"\x3e\t\t\x3cdiv class\x3d"map-drop"\x3e\x3c/div\x3e\t\x3c/div\x3e\x3c/div\x3e');0==d.showNav&&$("#"+this.container).find(".map-control").hide();f=this.config},load:function(){TUI.SVG.svgDoc=$("#"+TUI.SVG.sceneHandle.container).find("embed")[0].getSVGDocument();TUI.SVG.sceneHandle.loadSvg(this.fn)},loadSvg:function(a){b=document.getElementById("svgMap_"+this.config.tag);g=TUI.SVG.svgDoc;null!=g&&(h=g.rootElement,c=new SVGMap(b),r=c.getCenter(),$(".map-control").find(".zoom").bind(TUI.env.ua.clickEventUp,function(){var a=90-9*c.getZoom();10>=a?$(".map-drop").css({top:"0px"}):(c.zoomIn(),$(".map-drop").css({top:a+"px"}))}),$(".map-control").find(".back").bind(TUI.env.ua.clickEventUp,function(){var a=90-9*c.getZoom();80<=a?(c.setZoom(1),$(".map-drop").css({top:"90px"})):(c.zoomOut(),0>a&&(a=0),$(".map-drop").css({top:a+"px"}))}),$(".map-control").find(".left").bind(TUI.env.ua.clickEventUp,function(){c.panDirection(-.6,0)}),$(".map-control").find(".right").bind(TUI.env.ua.clickEventUp,function(){c.panDirection(.6,0)}),$(".map-control").find(".up").bind(TUI.env.ua.clickEventUp,function(){c.panDirection(0,-.6)}),$(".map-control").find(".down").bind(TUI.env.ua.clickEventUp,function(){c.panDirection(0,.6)}),$(".map-control").find(".center").bind(TUI.env.ua.clickEventUp,function(){c.setCenter(r)}),1==this.config.showNav&&(g.addEventListener(TUI.env.ua.clickEventDown,function(a){q=1;var b=a||window.event;1<navigator.msMaxTouchPoints||1<window.navigator.maxTouchPoints||!TUI.env.ua.ontouch||(a.preventDefault(),b=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]);startlat=b.clientX;startlon=b.clientY;h.setAttribute("style","cursor:move")},!1),g.addEventListener(TUI.env.ua.clickEventMove,function(a){if(1==q){var b=$(window).width(),d=$(window).height(),g=a||window.event;1<navigator.msMaxTouchPoints||1<window.navigator.maxTouchPoints||!TUI.env.ua.ontouch||(a.preventDefault(),g=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]);a=(g.clientX-startlat)/b;d=(g.clientY-startlon)/d;.02>Math.abs(a)&&.02>Math.abs(d)||(c.panDirection(a,d),startlat=g.clientX,startlon=g.clientY)}},!1),g.addEventListener(TUI.env.ua.clickEventUp,function(a){q=0;h.setAttribute("style","cursor:default")},!1)),g.addEventListener("mousewheel",function(a){0<a.wheelDelta?$(".map-control").find(".zoom").trigger(TUI.env.ua.clickEventUp):0>a.wheelDelta&&$(".map-control").find(".back").trigger(TUI.env.ua.clickEventUp)},!1),"function"==typeof a&&a(f,g,this))},setLable:function(a,b){var c=g.getElementById(a);null!=c&&null!=c.firstChild&&(c.firstChild.data=b)},setTip:function(a){var b=g.getElementById(a.tag);null!=b&&($(b).unbind("mouseover"),$(b).unbind("mousemove"),$(b).unbind("mouseout"),$(b).bind("mouseover",{handle:this,node:a},function(a){var b=$(a.data.node.html);b.bind(TUI.env.ua.clickEventUp,{config:a.data.node.fn,data:a.data.node.data},function(a){"function"==typeof a.data.config&&a.data.config(a.data.data)});$(".svg-tipinfo").html('\x3cdiv class\x3d"tip" style\x3d"width:'+a.data.node.width+"px;left:"+(5-a.data.node.width/2)+'px"\x3e\x3cspan class\x3d"content"\x3e\x3c/span\x3e\x3cspan class\x3d"tipclose" style\x3d"position: absolute;right: 4px;top: 0px;cursor: pointer;"\x3ex\x3c/span\x3e\x3c/div\x3e\x3cspan class\x3d"pointer"\x3e\x3c/span\x3e');$(".svg-tipinfo").find(".content").append(b);$(".svg-tipinfo").find(".tipclose").bind(TUI.env.ua.clickEventUp,{config:a.data.node.fn,data:a.data.node.data},function(a){$(".svg-tipinfo").css({display:"none"})})}),$(b).bind("mousemove",{handle:this,node:a},function(a){var b=a||window.event;1<navigator.msMaxTouchPoints||1<window.navigator.maxTouchPoints||!TUI.env.ua.ontouch||(a.preventDefault(),b=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]);$(".svg-tipinfo").css({display:"block",top:b.clientY-5+"px",left:b.clientX+5+"px"})}))},show:function(a){$("#"+this.container).fadeIn(a)},hide:function(a){$("#"+this.container).fadeOut(a)},clear:function(){$("#"+this.container).empty()}}};TUI.Video=function(a,d){var b=null;return{init:function(c){this.container=a;this.config=d?d:{};this.selDate=new Date;this.backplay=this.stop=!1;this.VideoID=d.VideoID;this.VideoType=d.VideoType;this.hisTime=0;$("#"+this.container).html('\x3cdiv class\x3d"video"\x3e\t\x3cimg src\x3d"/API/Video/Data/background.jpg"  style\x3d"width:100%;" onmousedown\x3d"return false;"/\x3e\t\x3cdiv class\x3d"toolbar"\x3e\t\t\x3cspan class\x3d"calendar"\x3e\t\t\t\x3ci class\x3d"icon iconfont prev" style\x3d"font-size: 12.5pt;cursor: pointer;"\x3e\x26#xe63c;\x3c/i\x3e\t\t\t\x3cspan class\x3d"videodate"\x3e\u2014\u2014\x3c/span\x3e\t\t\t\x3ci class\x3d"icon iconfont next" style\x3d"font-size: 12.5pt;cursor: pointer;"\x3e\x26#xe620;\x3c/i\x3e\t\t\x3c/span\x3e\t\x3c/div\x3e\t\x3cdiv class\x3d"playctrl"\x3e\x3ci class\x3d"icon iconfont" style\x3d"font-size: 18pt;"\x3e\x26#xe71a;\x3c/i\x3e\x3c/div\x3e\t\x3cdiv class\x3d"playbar"\x3e\t\t\x3cinput type\x3d"text" class\x3d"playtime" value\x3d""/\x3e\t\x3c/div\x3e\x3c/div\x3e');$("#"+this.container).find(".videodate").html(this.selDate.Format("MM\u6708dd\u65e5"));$("#"+this.container).find(".playtime").ionRangeSlider({min:0,max:86400,keyboard:!0,hide_min_max:!0,prettify:function(a){var b=Math.floor(a%3600/60),c=Math.floor(a%60);return TUI.Utils.formatNumber(Math.floor(a/3600),"00")+":"+TUI.Utils.formatNumber(b,"00")+":"+TUI.Utils.formatNumber(c,"00")},onChange:function(a){0!=a.from&&86400!=a.from&&(b.stop=!0,window.clearInterval(b.videoTime),$("#"+b.container).find(".playctrl").html('\x3ci class\x3d"icon iconfont" style\x3d"font-size: 18pt;"\x3e\x26#xe7a0;\x3c/i\x3e'),$("#"+b.container).find(".video").find("img").attr("src","/API/Video/"+b.VideoID+"?type\x3dimage"))},onFinish:function(a){if(0!=a.from&&86400!=a.from){b.stop=!1;$("#"+b.container).find(".playctrl").html('\x3ci class\x3d"icon iconfont" style\x3d"font-size: 18pt;"\x3e\x26#xe71a;\x3c/i\x3e');var c=Math.floor(a.from/3600),d=Math.floor(a.from%3600/60);a=Math.floor(a.from%60);c=TUI.Utils.parseDate(b.selDate.Format("yyyy-MM-dd")+" "+TUI.Utils.formatNumber(c,"00")+":"+TUI.Utils.formatNumber(d,"00")+":"+TUI.Utils.formatNumber(a,"00"));"NVR"==b.VideoType&&c<new Date?(b.backplay=!0,b.selTime=c,b.back(),window.clearInterval(b.videoTime),b.videoTime=window.setInterval(function(){b.back()},6E4)):(b.backplay=!1,b.hisTime=0,$("#"+b.container).find(".video").find("img").attr("src","/API/Video/"+b.VideoID+".vid?randram\x3d"+(new Date).getTime()))}}});$("#"+this.container).find(".playctrl").bind(TUI.env.ua.clickEventDown,{handle:this},function(a){if(""!=a.data.handle.VideoID)return a.data.handle.stop?(a.data.handle.stop=!1,$(this).html('\x3ci class\x3d"icon iconfont" style\x3d"font-size: 18pt;"\x3e\x26#xe71a;\x3c/i\x3e'),TUI.env.ua.ie?(window.clearInterval(a.data.handle.videoTime),a.data.handle.videoTime=window.setInterval(function(){$("#"+b.container).find(".video img").attr("src","/API/Video/"+a.data.handle.VideoID+".vid?randram\x3d"+(new Date).getTime())},500)):$("#"+b.container).find(".video img").attr("src","/API/Video/"+a.data.handle.VideoID+".vid?randram\x3d"+(new Date).getTime())):(a.data.handle.stop=!0,window.clearInterval(a.data.handle.videoTime),$(this).html('\x3ci class\x3d"icon iconfont" style\x3d"font-size: 18pt;"\x3e\x26#xe7a0;\x3c/i\x3e'),$("#"+b.container).find(".video img").attr("src","/API/Video/"+a.data.handle.VideoID+"?type\x3dimage")),!1});$("#"+this.container).find(".calendar .prev").bind(TUI.env.ua.clickEventDown,{handle:this},function(a){a.data.handle.selDate=a.data.handle.selDate.DateAdd("d",-1);$("#"+b.container).find(".toolbar .videodate").html(a.data.handle.selDate.Format("MM\u6708dd\u65e5"));a=TUI.Utils.parseDate(b.selDate.Format("yyyy-MM-dd")+" "+b.selTime.Format("hh:mm:ss"));"NVR"==b.VideoType&&a<new Date?(b.backplay=!0,b.selTime=a,b.back(),window.clearInterval(b.videoTime),b.videoTime=window.setInterval(function(){b.back()},6E4)):(b.backplay=!1,b.hisTime=0,$("#"+b.container).find(".video img").attr("src","/API/Video/"+b.VideoID+".vid?randram\x3d"+(new Date).getTime()));return!1});$("#"+this.container).find(".calendar .next").bind(TUI.env.ua.clickEventDown,{handle:this},function(a){var c=a.data.handle.selDate.DateAdd("d",1);if(c>new Date)return!1;a.data.handle.selDate=c;$("#"+b.container).find(".toolbar .videodate").html(a.data.handle.selDate.Format("MM\u6708dd\u65e5"));a=TUI.Utils.parseDate(b.selDate.Format("yyyy-MM-dd")+" "+b.selTime.Format("hh:mm:ss"));"NVR"==b.VideoType&&a<new Date?(b.backplay=!0,b.selTime=a,b.back(),window.clearInterval(b.videoTime),b.videoTime=window.setInterval(function(){b.back()},6E4)):(b.backplay=!1,b.hisTime=0,$("#"+b.container).find(".video img").attr("src","/API/Video/"+b.VideoID+".vid?randram\x3d"+(new Date).getTime()));return!1});this.slider=$("#"+this.container).find(".playtime").data("ionRangeSlider");b=this;TUI.env.ua.ie?(window.clearInterval(this.videoTime),this.videoTime=window.setInterval(function(){$("#"+b.container).find(".video img").attr("src","/API/Video/"+b.VideoID+".vid?randram\x3d"+(new Date).getTime())},500)):$("#"+this.container).find(".video img").attr("src","/API/Video/"+b.VideoID+".vid?randram\x3d"+(new Date).getTime());$(this).everyTime(1E3,"play",function(){if(b.backplay){if(!b.stop&&0<b.hisTime){b.hisTime++;b.slider.update({from:b.hisTime,to:b.hisTime});var a=Math.floor(b.hisTime/3600),c=Math.floor(b.hisTime%3600/60),d=Math.floor(b.hisTime%60);b.selTime=TUI.Utils.parseDate(b.selDate.Format("yyyy-MM-dd")+" "+TUI.Utils.formatNumber(a,"00")+":"+TUI.Utils.formatNumber(c,"00")+":"+TUI.Utils.formatNumber(d,"00"))}}else b.stop||(a=new Date,d=3600*a.getHours()+60*a.getMinutes()+a.getSeconds(),b.slider.update({from:d,to:d}),a=Math.floor(d/3600),c=Math.floor(d%3600/60),d=Math.floor(d%60),b.selTime=TUI.Utils.parseDate(b.selDate.Format("yyyy-MM-dd")+" "+TUI.Utils.formatNumber(a,"00")+":"+TUI.Utils.formatNumber(c,"00")+":"+TUI.Utils.formatNumber(d,"00")))})},back:function(){var a=this.selTime,b=a.DateAdd("n",1);this.selTime=b;this.hisTime=3600*a.getHours()+60*a.getMinutes()+a.getSeconds();$("#"+this.container).find(".video").find("img").attr("src","/API/Video/"+this.VideoID+".vid?startTime\x3d"+a.Format("yyyy-MM-dd hh:mm:ss")+"\x26endTime\x3d"+b.Format("yyyy-MM-dd hh:mm:ss"))},show:function(a){$("#"+this.container).fadeIn(a)},hide:function(a){$("#"+this.container).fadeOut(a)},clear:function(){$("#"+this.container).empty()}}};TUI.Map=function(a,d){var b=d?d:{};void 0==b.server&&(b.server="");var c="click",g=[],h;return{init:function(d){this.container=a;$("#"+this.container).html('\x3cdiv class\x3d"viewport"\x3e\x3c/div\x3e\x3cdiv class\x3d"map-tipinfo"\x3e\x3c/div\x3e\x3cdiv class\x3d"map-control"\x3e\x3cdiv class\x3d"map-arrow"\x3e\x3ca href\x3d"#left" onclick\x3d"return false;" class\x3d"left" title\x3d"\u5411\u5de6\u5e73\u79fb"\x3eLeft\x3c/a\x3e\x3ca href\x3d"#right" class\x3d"right" onclick\x3d"return false;" title\x3d"\u5411\u53f3\u5e73\u79fb"\x3eRight\x3c/a\x3e\x3ca href\x3d"#center" class\x3d"center" onclick\x3d"return false;" title\x3d"\u5c45\u4e2d"\x3eCenter\x3c/a\x3e\x3ca href\x3d"#up" class\x3d"up" onclick\x3d"return false;" title\x3d"\u5411\u4e0a\u5e73\u79fb"\x3eUp\x3c/a\x3e\x3ca href\x3d"#down" class\x3d"down" onclick\x3d"return false;" title\x3d"\u5411\u4e0b\u5e73\u79fb"\x3eDown\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"map-scale"\x3e\x3ca href\x3d"#zoom" onclick\x3d"return false;" class\x3d"zoom" title\x3d"\u653e\u5927"\x3eZoom\x3c/a\x3e\x3ca href\x3d"#zoom_out" class\x3d"back" onclick\x3d"return false;" title\x3d"\u7f29\u5c0f"\x3eBack\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"map-area"\x3e\x3cdiv class\x3d"map-drop"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"searchbox"\x3e\x3cinput type\x3d"text" name\x3d"searchKey" id\x3d"searchKey" placeholder\x3d"\u67e5\u8be2..." required\x3e\x3cdiv class\x3d"result"\x3e\x3c/div\x3e\x3cspan class\x3d"pointer"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"map-operate"\x3e\x3cdiv class\x3d"icon map-click active"\x3e\x3cspan class\x3d"center"\x3e\u70b9\u9009\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"icon map-pin"\x3e\x3cspan class\x3d"center"\x3e\u6807\u6ce8\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"icon map-select"\x3e\x3cspan class\x3d"center"\x3e\u6846\u9009\x3c/span\x3e\x3c/div\x3e'+(b.showEdit?'\x3cdiv class\x3d"icon map-search"\x3e\x3cspan class\x3d"center"\x3e\u67e5\u8be2\x3c/span\x3e\x3c/div\x3e':'\x3cdiv class\x3d"icon map-setup"\x3e\x3cspan class\x3d"center"\x3e\u8bbe\u7f6e\x3c/span\x3e\x3c/div\x3e')+"\x3c/div\x3e");0==b.showNav&&$("#"+this.container).find(".map-control").hide();var f=$("#"+this.container).find(".viewport");h=this;$.ajax({type:"get",url:b.server+"/api/map/"+b.tag,dataType:"jsonp",context:this,error:function(a){alert("\u52a0\u8f7d\u5730\u56fe\u914d\u7f6e\u53c2\u6570\u5931\u8d25\uff01")},success:function(a){b.layerList=[];0<a.layerSplit&&(b.layerList[0]=a.layerList[0],0==b.initZoom-1&&(b.initWidth=a.layerList[0].width,b.initHeight=a.layerList[0].height),f.append('\x3cdiv id\x3d"layer0" style\x3d"background: url('+b.server+"/api/map/"+b.tag+"/"+a.mapid+"/0/0) no-repeat;width: "+a.layerList[0].width+"px; height: "+a.layerList[0].height+'px;"\x3e\x3c/div\x3e'));for(i=1;i<a.layerSplit;i++){var q=100/3/i,e=50/i,p="";for(j=0;j<2*i;j++)for(k=0;k<3*i;k++)p=p+'\x3cdiv style\x3d"float:left;width:'+q+"%;height:"+e+'%"\x3e\x3cimg alt\x3d"'+b.server+"/api/map/"+b.tag+"/"+a.mapid+"/"+i+"/"+(3*j*i+k)+'" style\x3d"width:100%;height:100%;"/\x3e\x3c/div\x3e';b.layerList[i]=a.layerList[i];i==b.initZoom-1&&(b.initWidth=a.layerList[i].width,b.initHeight=a.layerList[i].height);f.append('\x3cdiv style\x3d"width:'+a.layerList[i].width+"px; height: "+a.layerList[i].height+'px;"\x3e'+p+'\x3cdiv id\x3d"layer'+i+'" class\x3d"mapcontent"\x3e\x3c/div\x3e\x3c/div\x3e')}f.mapbox({mousewheel:!0,mapconfig:b,defaultLayer:b.initZoom-1,layerSplit:a.layerSplit,callAfter:function(a,d,e,g){"pin"==c&&"function"==typeof b.pin?(a=$(a).width()/b.initWidth*b.initZoom,b.pin(b,(d-16)/a,(e-32)/a,a,h)):"search"==c&&$(".map-operate").find(".map-click").trigger(TUI.env.ua.clickEventUp)},afterSelect:function(a,d,e,f,q){if("select"==c&&"function"==typeof b.select){var m=[];a=$(a).find(".mapcontent").find(".map-point");for(i=0;i<a.length;i++){var n=parseInt($(a[i]).css("top")),p=parseInt($(a[i]).css("left"));n>e&&n<q&&p>d&&p<f&&(m[g[a[i].id].tag]=a[i])}b.select(m,h)}},afterZoom:function(a,b,d,e){b=$(a).width()/a.defaultWidth;d=$(a).height()/a.defaultHeight;e=$(a).find(".mapcontent").find(".map-point");for(i=0;i<e.length;i++){var f=Math.round(g[e[i].id].left*b+16*(b-1)),h=Math.round(g[e[i].id].top*d+32*(d-1));$(e[i]).css({left:f+"px",top:h+"px"})}a=$(a).find("img");for(i=0;i<a.length;i+=4)""==a[i].src&&(a[i].src=a[i].alt);for(i=1;i<a.length;i+=4)""==a[i].src&&(a[i].src=a[i].alt);for(i=2;i<a.length;i+=4)""==a[i].src&&(a[i].src=a[i].alt);for(i=3;i<a.length;i+=4)""==a[i].src&&(a[i].src=a[i].alt);"search"==c&&$("#searchKey").trigger("change")}});"function"==typeof d&&d(a,this)}});$(window).resize({handle:this},function(a){$("#"+a.data.handle.container).find(".map-control .center").trigger(TUI.env.ua.clickEventDown)});0==b.showTool&&$("#"+this.container).find(".map-operate").hide();$("#"+this.container).find(".map-operate div").bind(TUI.env.ua.clickEventUp,{handle:this},function(a){"icon map-setup"==this.className?"function"==typeof b.setup&&b.setup(b,h):"icon map-search"==this.className?(c="search",$("#"+a.data.handle.container).find(".map-operate div").removeClass("active"),$(this).addClass("active"),f.mapbox("setSearch"),$("#"+a.data.handle.container).find(".searchbox").find(".result").empty(),$("#searchKey").val(""),$("#"+a.data.handle.container).find(".searchbox").slideDown("fast")):"icon map-click"==this.className?("search"==c&&$("#"+a.data.handle.container).find(".searchbox").fadeOut("fast"),c="click",$("#"+a.data.handle.container).find(".map-operate div").removeClass("active"),$(this).addClass("active"),f.mapbox("setClick")):"icon map-select"==this.className?("search"==c&&$("#"+a.data.handle.container).find(".searchbox").fadeOut("fast"),c="select",$("#"+a.data.handle.container).find(".map-operate div").removeClass("active"),$(this).addClass("active"),f.mapbox("setSelect")):"icon map-pin"==this.className&&("search"==c&&$("#"+a.data.handle.container).find(".searchbox").fadeOut("fast"),c="pin",$("#"+a.data.handle.container).find(".map-operate div").removeClass("active"),$(this).addClass("active"),f.mapbox("setPin"));return!1});$("#searchKey").keyup({handle:this},function(a){var b=$("#"+a.data.handle.container).find(".searchbox").find(".result");b.empty();if(""!=$("#searchKey").val()){var c=$("#"+a.data.handle.container).find(".current-map-layer"),d=c.width()/c[0].defaultWidth,c=c.find(".mapcontent").find(".map-point"),h=!1;for(i=0;i<c.length;i++){var m=c[i].id;null!=g[m]&&0<=g[m].name.indexOf($("#searchKey").val())&&(h=$('\x3cdiv class\x3d"item"\x3e'+g[m].name+'\x3cspan class\x3d"button"\x3eGO\x3cspan\x3e\x3c/div\x3e'),h.find(".button").bind(TUI.env.ua.clickEventDown,{handle:a.data.handle,tag:g[m].tag,top:g[m].top*d,left:g[m].left*d},function(a){f.mapbox("center",{x:a.data.left,y:a.data.top});a.data.handle.closeAllPoint();a.data.handle.activePoint(a.data.tag);return!1}),b.append(h),h=!0)}h||(h=$('\x3cdiv class\x3d"item"\x3e\u672c\u56fe\u5c42\u6ca1\u6709\u53d1\u73b0\u67e5\u8be2\u70b9\uff01\x3c/div\x3e'),b.append(h))}})},show:function(a){$("#"+this.container).fadeIn(a)},hide:function(a){$("#"+this.container).fadeOut(a)},clear:function(){$("#"+this.container).empty()},addPoint:function(a,d){var f=d?d:{},h=-1;for(i=0;i<b.layerList.length;i++){var e=b.layerList[i].width/b.initWidth*b.initZoom,p=i+1==b.layerList.length?e:b.layerList[i+1].width/b.initWidth*b.initZoom;if(e>=f.mapZoom){var n="map-"+a+"-"+i;g[n]={top:f.mapY*e+32*(e/f.mapZoom-1),left:f.mapX*e+16*(e/f.mapZoom-1),tag:a,name:f.name,icon:f.icon,color:f.color};f.mapZoom>=e&&f.mapZoom<p&&(h=i+1);i==h?(p=f.mapZoom/e,e=Math.round(g[n].left*p+16*(p-1)),p=Math.round(g[n].top*p+32*(p-1)),$("#layer"+i).append('\x3cdiv class\x3d"map-point '+(f.active?"active ":"")+f.icon+"_"+f.color+'" id\x3d"'+n+'" style\x3d"position:absolute;top:'+p+"px;left:"+e+'px;"\x3e\x3cdiv class\x3d"tip" style\x3d"width:'+f.width+"px;left:"+-(f.width/2-5)+'px"\x3e\x3cspan class\x3d"content"\x3e'+f.html+'\x3c/span\x3e\x3cspan class\x3d"close"\x3ex\x3c/span\x3e\x3c/div\x3e\x3cspan class\x3d"pointer"\x3e\x3c/span\x3e\x3c/div\x3e')):$("#layer"+i).append('\x3cdiv class\x3d"map-point '+(f.active?"active ":"")+f.icon+"_"+f.color+'" id\x3d"'+n+'" style\x3d"position:absolute;top:'+g[n].top+"px;left:"+g[n].left+'px;"\x3e\x3cdiv class\x3d"tip" style\x3d"width:'+f.width+"px;left:"+-(f.width/2-5)+'px"\x3e\x3cspan class\x3d"content"\x3e'+f.html+'\x3c/span\x3e\x3cspan class\x3d"close"\x3ex\x3c/span\x3e\x3c/div\x3e\x3cspan class\x3d"pointer"\x3e\x3c/span\x3e\x3c/div\x3e');$("#"+n).bind(TUI.env.ua.clickEventDown,{handle:this,tag:a,fn:f.fn},function(a){a.data.fn(a.data.handle,a.data.tag,c);return!1});$("#"+n).find(".close").bind(TUI.env.ua.clickEventDown,{handle:this,tag:a,fn:f.fn},function(a){a.data.handle.closePoint(a.data.tag);return!1})}}},mdyPoint:function(a,b){this.delPoint(a);this.addPoint(a,b)},delPoint:function(a){for(var b in g)null!=g[b]&&g[b].tag==a&&($("#"+b).remove(),g[b]=null)},updatePoint:function(a,b,c){for(var d in g)null!=g[d]&&g[d].tag==a&&($("#"+d).removeClass(g[d].icon+"_"+g[d].color),$("#"+d).addClass(g[d].icon+"_"+c),$("#"+d).find(".tip .content").html(b),g[d].color=c)},closeAllPoint:function(){var a;$("#"+this.container).find(".viewport");var b=$("#"+this.container).find(".current-map-layer");b.width();b.find(".mapcontent").find(".map-point");for(a in g)null!=g[a]&&($("#"+a).removeClass("active"),$("#"+a).removeClass("disable"))},activeAllPoint:function(){var a;$("#"+this.container).find(".viewport");var b=$("#"+this.container).find(".current-map-layer");b.width();b.find(".mapcontent").find(".map-point");for(a in g)null!=g[a]&&($("#"+a).addClass("active"),$("#"+a).removeClass("disable"))},closePoint:function(a){var b;$("#"+this.container).find(".viewport");var c=$("#"+this.container).find(".current-map-layer");c.width();c.find(".mapcontent").find(".map-point");for(b in g)null!=g[b]&&g[b].tag==a&&($("#"+b).removeClass("active"),$("#"+b).addClass("disable"))},activePoint:function(a){var b,c=$("#"+this.container).find(".viewport"),d=$("#"+this.container).find(".current-map-layer"),e=d.width()/d[0].defaultWidth,d=d.find(".mapcontent").find(".map-point");for(b in g)if(null!=g[b]&&g[b].tag==a)for($("#"+b).addClass("active"),$("#"+b).removeClass("disable"),i=0;i<d.length;i++)if(b==d[i].id){c.mapbox("center",{x:g[b].left*e,y:g[b].top*e});break}}}};TUI.WebVR=function(a){var d={},b={},c=null,g=function(){},h,f,r=[],q=function(){},w=!1;return{init:function(e){d=e?e:{};void 0==d.server&&(d.server="");c=d.option;g=d.fn;q=d.nav;h=this;f=d.path;TUI.WebVR.sceneHandle=this;TUI.WebVR.scenePath=f;TUI.WebVR.sceneMainPath=d.path;$.ajax({type:"get",url:d.server+"/API/Map/VR/"+d.path,dataType:"jsonp",context:this,error:function(a){alert("\u52a0\u8f7d\u573a\u666f\u914d\u7f6e\u53c2\u6570\u5931\u8d25\uff01")},success:function(e){if(e.flag){void 0!=c&&void 0!=c.rotate&&(0!=c.rotate.longitude&&(e.data.longitude=c.rotate.longitude),0!=c.rotate.latitude&&(e.data.latitude=c.rotate.latitude));for(var n=0;n<e.data.markers.length;n++)void 0!=e.data.markers[n].image&&""!=e.data.markers[n].image&&(e.data.markers[n].image=d.server+"/API/Map/VR/"+e.data.markers[n].image);b=e;var m=e.data.panorama;if(TUI.Utils.isString(e.data.panorama))m=d.server+e.data.panorama;else if(TUI.Utils.isArray(e.data.panorama))for(m=[],n=0;n<e.data.panorama.length;n++)m[n]=d.server+e.data.panorama[n];if(void 0!=this.PSV){void 0!=this.PSV.panel&&this.PSV.panel.hidePanel();if(this.PSV.cubeload==TUI.Utils.isArray(m)){this.PSV.clearMarkers();this.PSV.firstload=!1;this.PSV.newMarkerArea=void 0;this.PSV.newMarkerPoint=void 0;void 0!=e.data.rotate?this.PSV.setPanorama(m,e.data.rotate,!this.PSV.cubeload):this.PSV.setPanorama(m,{longitude:e.data.longitude,latitude:e.data.latitude},!this.PSV.cubeload);this.PSV.setCaption(e.data.caption);return}this.PSV.navFlag&&(this.PSV.navList=[],this.PSV.navFlag=!1,window.clearInterval(this.PSV.navTime),$("#MyNav").removeClass("red"),$("#MyNav").addClass("blue"),$("#MyNav").html("\u5f00\u59cb\u5de1\u822a"));this.PSV.destroy();this.PSV=void 0}this.PSV=new PhotoSphereViewer({panorama:m,container:a,loading_img:d.server+"/API/Map/VR/photosphere-logo.gif",default_long:e.data.longitude,default_lat:e.data.latitude,move_speed:3,time_anim:!0,anim_speed:"1rpm",caption:e.data.caption,default_fov:80,mousewheel:!0,gyroscope:!0,webgl:!0,fisheye:!1,usexmpdata:!1,lang:{autorotate:"\u81ea\u52a8\u65cb\u8f6c",zoom:"\u7f29\u653e",zoomOut:"\u653e\u5927",zoomIn:"\u7f29\u5c0f",download:"\u5bfc\u51fa",fullscreen:"\u5168\u5c4f",markers:"AR\u6807\u8bb0",gyroscope:"\u9640\u87ba\u4eea"},navbar:["autorotate","zoom","markers","caption",{title:"\u5bfc\u822a\u5173\u7cfb\u56fe",className:"custom-button",content:'\x3ci class\x3d"fa fa-houzz" style\x3d"line-height: 20px;font-size:16pt;"\x3e\x3c/i\x3e',onClick:function(){w?(w=!1,$(".psv-GraphMap").hide()):(w=!0,$(".psv-GraphMap").show(),TUI.WebVR.sceneHandle.getGraphData(TUI.WebVR.sceneMainPath))}},"gyroscope",{title:"\u9009\u62e9\u5de1\u822a\u8def\u5f84",className:"custom-button",content:'\x3ci class\x3d"fa fa-location-arrow" style\x3d"line-height: 20px;font-size:14pt;"\x3e\x3c/i\x3e',onClick:function(){if(void 0==d.path)alert("\u6ca1\u6709\u6307\u5b9aVR\u5de1\u822a\u7a7a\u95f4\uff0c\u8ba1\u7b97\u5de1\u822a\u8def\u5f84\u5931\u8d25\uff01");else{w=!1;$(".psv-GraphMap").hide();var a=d.path.split("/")[0];$.ajax({type:"get",url:d.server+"/API/Map/VR/"+a,dataType:"jsonp",context:this,error:function(a){alert("\u52a0\u8f7d\u573a\u666f\u914d\u7f6e\u53c2\u6570\u5931\u8d25\uff01")},success:function(a){for(var b="",c=d.path.split("/")[0],e=0;e<a.data.length;e++)b+='\x3coption value\x3d"'+c+"/"+a.data[e].tag+'" style\x3d"color:#888;"\x3e'+a.data[e].caption+"\x3c/option\x3e";this.navFlag=!1;window.clearInterval(this.navTime);this.showPanel('\x3ch3 style\x3d"margin: 0 0 10px 0;text-align: center;"\x3e\u9009\u62e9\u5de1\u822a\u8def\u5f84\x3c/h3\x3e\x3ctable width\x3d"100%" cellPadding\x3d"5px" border\x3d"0px" style\x3d"font-size:10.5pt;"\x3e\x3ctr\x3e\x3ctd width\x3d"80px" style\x3d"line-height: 24px;"\x3e\x3ci class\x3d"fa fa-map-marker"\x3e\x3c/i\x3e\x26nbsp;\u51fa\u53d1\uff1a\x3c/td\x3e\x3ctd style\x3d"text-align: center;line-height: 24px;"\x3e\x3cselect id\x3d"navFrom" style\x3d"width:100%;background: transparent;color: #fff;font-size: 10.5pt;margin: 0 0 5px 0;"\x3e\t\x3coption value\x3d"" style\x3d"color:#888;"\x3e\u6211\u7684\u4f4d\u7f6e\x3c/option\x3e'+b+'\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr id\x3d"fromtr" style\x3d"display: none;"\x3e\x3ctd width\x3d"80px" style\x3d"line-height: 24px;"\x3e\x3ci class\x3d"fa fa-minus" id\x3d"hideFromtr"\x3e\x3c/i\x3e\x26nbsp;\u9014\u7ecf\uff1a\x3c/td\x3e\x3ctd style\x3d"text-align: center;line-height: 24px;"\x3e\x3cselect id\x3d"navFromto" style\x3d"width:100%;background: transparent;color: #fff;font-size: 10.5pt;margin: 0 0 5px 0;"\x3e\t\x3coption value\x3d"" style\x3d"color:#888;"\x3e\u6211\u7684\u4f4d\u7f6e\x3c/option\x3e'+b+'\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd width\x3d"80px" style\x3d"line-height: 24px;"\x3e\x3ci class\x3d"fa fa-plus" id\x3d"showFromtr"\x3e\x3c/i\x3e\x26nbsp;\u5230\u8fbe\uff1a\x3c/td\x3e\x3ctd style\x3d"text-align: center;line-height: 24px;"\x3e\x3cselect id\x3d"navTo" style\x3d"width:100%;background: transparent;color: #fff;font-size: 10.5pt;margin: 0 0 5px 0;"\x3e'+b+'\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd width\x3d"80px" style\x3d"line-height: 24px;"\x3e\x3ci class\x3d"fa fa-clock-o"\x3e\x3c/i\x3e\x26nbsp;\u505c\u7559\uff1a\x3c/td\x3e\x3ctd style\x3d"text-align: center;line-height: 24px;"\x3e\x3cselect id\x3d"navTime" style\x3d"width:100%;background: transparent;color: #fff;font-size: 10.5pt;margin: 0 0 5px 0;"\x3e\t\x3coption value\x3d"3" style\x3d"color:#888;"\x3e3\u79d2\x3c/option\x3e\t\x3coption value\x3d"5" style\x3d"color:#888;"\x3e5\u79d2\x3c/option\x3e\t\x3coption value\x3d"10" style\x3d"color:#888;"\x3e10\u79d2\x3c/option\x3e\t\x3coption value\x3d"15" style\x3d"color:#888;"\x3e15\u79d2\x3c/option\x3e\t\x3coption value\x3d"30" style\x3d"color:#888;"\x3e30\u79d2\x3c/option\x3e\t\x3coption value\x3d"60" style\x3d"color:#888;"\x3e60\u79d2\x3c/option\x3e\t\x3coption value\x3d"300" style\x3d"color:#888;"\x3e5\u5206\u949f\x3c/option\x3e\t\x3coption value\x3d"600" style\x3d"color:#888;"\x3e10\u5206\u949f\x3c/option\x3e\t\x3coption value\x3d"900" style\x3d"color:#888;"\x3e15\u5206\u949f\x3c/option\x3e\t\x3coption value\x3d"1800" style\x3d"color:#888;"\x3e30\u5206\u949f\x3c/option\x3e\t\x3coption value\x3d"3600" style\x3d"color:#888;"\x3e60\u5206\u949f\x3c/option\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd width\x3d"80px" style\x3d"line-height: 24px;"\x3e\x3ci class\x3d"fa fa-retweet"\x3e\x3c/i\x3e\x26nbsp;\u8fd4\u822a\uff1a\x3c/td\x3e\x3ctd style\x3d"text-align: center;line-height: 24px;"\x3e\x3cselect id\x3d"navLoop" style\x3d"width:100%;background: transparent;color: #fff;font-size: 10.5pt;margin: 0 0 5px 0;"\x3e\t\x3coption value\x3d"0" style\x3d"color:#888;"\x3e\u7ec8\u70b9\u505c\u6b62\x3c/option\x3e\t\x3coption value\x3d"1" style\x3d"color:#888;"\x3e\u539f\u8def\u8fd4\u56de\x3c/option\x3e\t\x3coption value\x3d"2" style\x3d"color:#888;"\x3e\u8fd1\u8def\u8fd4\u56de\x3c/option\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3cbr\x3e\x3cdiv id\x3d"MyNav" class\x3d"btn btn-block blue"\x3e\u5f00\u59cb\u5de1\u822a\x3c/div\x3e\x3cdiv id\x3d"NavInfo"\x3e\x3c/div\x3e');$("#showFromtr").bind(TUI.env.ua.clickEventDown,{handle:this},function(a){$("#fromtr").show();return!1});$("#hideFromtr").bind(TUI.env.ua.clickEventDown,{handle:this},function(a){$("#fromtr").hide();return!1});$("#MyNav").bind(TUI.env.ua.clickEventDown,{handle:this},function(a){if(a.data.handle.navFlag)return a.data.handle.navList=[],a.data.handle.navFlag=!1,window.clearInterval(a.data.handle.navTime),$("#MyNav").removeClass("red"),$("#MyNav").addClass("blue"),$("#MyNav").html("\u5f00\u59cb\u5de1\u822a"),!1;var b=$("#navFrom").val();""==b&&(b=f);var c=$("#navFromto").val();""==c&&(c=b);var e=$("#navTo").val(),g=$("#navLoop").val();a.data.handle.time=$("#navTime").val();var m=d.path.split("/")[0];$.ajax({type:"POST",url:d.server+"/API/Map/VR/"+m,data:{from:b,fromto:c,to:e,loop:g},dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0,context:a.data.handle,error:function(a){alert("\u52a0\u8f7d\u573a\u666f\u914d\u7f6e\u53c2\u6570\u5931\u8d25\uff01")},success:function(a){a.flag?(this.navFlag=!0,this.navList=a.data,this.navList[0].from!=f&&(d.path=this.navList[0].from,h.init(d)),this.zoom(50),this.navTime=window.setInterval(function(){h.navSceneAR()},1E3*this.time),this.hidePanel(),$("#MyNav").removeClass("blue"),$("#MyNav").addClass("red"),$("#MyNav").html("\u505c\u6b62\u5de1\u822a")):alert("\u8ba1\u7b97\u5de1\u822a\u8def\u5f84\u5931\u8d25\uff01"+a.info)}});return!1})}})}}}],markers:e.data.markers});this.PSV.firstload=!0;this.PSV.cubeload=TUI.Utils.isArray(m);this.PSV.on("select-marker",function(a,b){this.bMarkers||("polygon_rad"==a.type&&this.updateMarker({id:a.id,svgStyle:{fill:"rgba(255, 235, 59, 0.2)",stroke:"rgba(255, 235, 59, 0.8)","stroke-width":"2px"}}),this.gotoMarker(a,1E3),void 0!=a.data?void 0!=a.data.url&&""!=a.data.url?(this.marker=a,"iframe"==a.data.type?this.showPanel("\x3cimg id\x3d'frameloading' src\x3d'"+d.server+"/API/Map/VR/waiting.gif' style\x3d'top: 50%;position: absolute;left: 50%;margin: -64px 0 0 -64px;'\x3e\x3ciframe  onload\x3d'TUI.WebVR.sceneHandle.frameload(this)' id\x3d'framecontent' src\x3d'"+a.data.url+"' marginwidth\x3d'0' marginheight\x3d'0' frameBorder\x3d'0' width\x3d'100%'  height\x3d'100%' style\x3d'overflow: auto;display: none;'\x3e\x3c/iframe\x3e",!0):"video"==a.data.type?this.showPanel('\x3ch3 style\x3d"margin: 15px 0 10px 0;text-align: center;"\x3e'+a.tooltip.content+'\x3c/h3\x3e\x3cvideo width\x3d"100%" style\x3d"margin: 10px 0 0 0;" controls  autoplay\x3d"true" preload\x3d"true"  autostart\x3d"true"\x3e\t\x3csource src\x3d"'+a.data.url+'" type\x3d"video/mp4"\x3e\x3c/video\x3e\x3cdiv style\x3d"margin: 10px;font-size: 10.5pt;line-height: 24px;"\x3e'+a.content+"\x3c/div\x3e",!0):$.ajax({type:"get",url:a.data.url,dataType:"html",context:this,error:function(b){this.showPanel((new Date).Format("yyyy-MM-dd hh:mm:ss")+" \u52a0\u8f7d\u573a\u666fAR\u6807\u8bb0\u5185\u5bb9\u5931\u8d25\uff01\x3cbr\x3e"+a.data.url)},success:function(a){this.showPanel(a);"function"==typeof this.marker.data.fn&&(this.marker.option=c,this.marker.data.fn(this,this.marker,$(this.panel.content)))}})):void 0!=a.data.path&&""!=a.data.path&&(void 0!=a.data.rotate&&(c.rotate=a.data.rotate),d.path=a.data.path,h.init(d)):this.showPanel(a.content))});this.PSV.on("panorama-loaded",function(){if(!this.firstload){for(var a=0;a<b.data.markers.length;a++)this.addMarker(b.data.markers[a],!1),void 0!=b.data.markers[a].data&&void 0!=b.data.markers[a].data.valuePath&&""!=b.data.markers[a].data.valuePath&&void 0!=b.data.markers[a].data.valueTag&&""!=b.data.markers[a].data.valueTag&&r.push(b.data.markers[a].data.valuePath);this.render()}"function"==typeof g&&(b.option=c,g(this,b));w?($(".psv-GraphMap").show(),TUI.WebVR.sceneHandle.getGraphData(TUI.WebVR.sceneMainPath)):$(".psv-GraphMap").hide()});w||$(".psv-container").append('\x3cdiv class\x3d"psv-GraphMap"\x3e\x3c/div\x3e')}}})},show:function(a){$("#"+this.container).fadeIn(a)},hide:function(a){$("#"+this.container).fadeOut(a)},clear:function(){void 0!=this.PSV&&(this.PSV.navFlag&&(this.PSV.navList=[],this.PSV.navFlag=!1,window.clearInterval(this.PSV.navTime),$("#MyNav").removeClass("red"),$("#MyNav").addClass("blue"),$("#MyNav").html("\u5f00\u59cb\u5de1\u822a")),this.PSV.destroy(),this.PSV=void 0);$("#"+this.container).empty()},getGraphData:function(a){$.ajax({type:"GET",url:"/API/Map/VR/Path?path\x3d"+a,dataType:"jsonp",success:function(a){if(!a.flag)return!1;var b=echarts.init($(".psv-GraphMap")[0]);option={tooltip:{},legend:{show:!1,data:[{name:"\u4e3b\u573a\u666f"},{name:"\u5b50\u573a\u666f"},{name:"\u8fc7\u6e21\u573a\u666f"}]},series:[{type:"graph",layout:"force",force:{repulsion:1E3,edgeLength:50},roam:!0,label:{normal:{show:!0}},edgeSymbol:["circle","arrow"],edgeSymbolSize:[4,10],edgeLabel:{normal:{show:!1,textStyle:{fontSize:13}}},data:a.data,links:a.links,itemStyle:{normal:{label:{show:!0},borderType:"solid",borderColor:"rgba(205, 149, 12, 0.2)",borderWidth:2,opacity:1},emphasis:{}},lineStyle:{normal:{width:"2",type:"solid",curveness:.3,opacity:.8},emphasis:{}},label:{normal:{show:!0,position:"inside",textStyle:{color:"#d3d7d4",fontStyle:"normal",fontWeight:"bolder",fontFamily:"sans-serif",fontSize:12},formatter:function(a){return a.data.showName}},emphasis:{}},categories:[{name:"\u4e3b\u573a\u666f",itemStyle:{normal:{color:"#E08283"}}},{name:"\u5b50\u573a\u666f",itemStyle:{normal:{color:"#3598DC"}}},{name:"\u8fc7\u6e21\u573a\u666f",itemStyle:{normal:{color:"#67809F"}}}]}]};b.setOption(option);b.on("click",function(a){void 0!=a.data.name&&(d.path=a.data.path,h.init(d),h.getGraphData(a.data.path))})}})},frameload:function(a){$("#frameloading").remove();$("#framecontent").show();"function"==typeof this.PSV.marker.data.fn&&(this.PSV.marker.option=c,this.PSV.marker.data.fn(this.PSV,this.PSV.marker,$(a.contentDocument)))},navSceneAR:function(){0<this.PSV.navList.length?this.PSV.navFlag&&(this.PSV.rotate({longitude:this.PSV.navList[0].longitude,latitude:0}),this.PSV.zoom(55),setTimeout(function(){h.PSV.zoom(60);setTimeout(function(){h.PSV.zoom(65);setTimeout(function(){h.PSV.zoom(50);h.PSV.navFlag&&(void 0!=h.PSV.navList[0].rotate&&(d.option.rotate=h.PSV.navList[0].rotate),d.path=h.PSV.navList[0].to,h.init(d),h.PSV.navList.splice(0,1))},150)},150)},150)):(this.PSV.navFlag=!1,window.clearInterval(this.PSV.navTime),$("#MyNav").removeClass("red"),$("#MyNav").addClass("blue"),$("#MyNav").html("\u5f00\u59cb\u5de1\u822a"),"function"==typeof q&&q(this,r),r=[])},addSceneAR:function(a,b){void 0!=this.PSV&&(a.width=32,a.height=32,a.image="red"==a.data.color?d.server+"/API/Map/VR/node2.gif":d.server+"/API/Map/VR/node1.gif",this.PSV.addMarker(a,b))},mdySceneAR:function(a,b){void 0!=this.PSV&&(a.image="red"==a.data.color?d.server+"/API/Map/VR/node2.gif":d.server+"/API/Map/VR/node1.gif",this.PSV.updateMarker(a))},delSceneAR:function(a,b){void 0!=this.PSV&&this.PSV.removeMarker({id:a},b)}}};jQuery.extend({handleError:function(a,d,b,c){a.error&&a.error.call(a.context||a,d,b,c);a.global&&(a.context?jQuery(a.context):jQuery.event).trigger("ajaxError",[d,a,c])},httpData:function(a,d,b){var c=a.getResponseHeader("content-type");a=(c="xml"==d||!d&&c&&0<=c.indexOf("xml"))?a.responseXML:a.responseText;if(c&&"parsererror"==a.documentElement.tagName)throw"parsererror";b&&b.dataFilter&&(a=b.dataFilter(a,d));"string"===typeof a&&("script"==d&&jQuery.globalEval(a),"json"==d&&(a=window.eval("("+a+")")));return a}});jQuery.extend({createUploadIframe:function(a,d){var b="jUploadFrame"+a,c=document.createElement("iframe");c.id=b;c.name=b;c.style.position="absolute";c.style.top="-1000px";c.style.left="-1000px";document.body.appendChild(c);return c},createUploadForm:function(a,d,b){var c="jUploadForm"+a;a="jUploadFile"+a;c=$('\x3cform  action\x3d"" method\x3d"POST" name\x3d"'+c+'" id\x3d"'+c+'" enctype\x3d"multipart/form-data"\x3e\x3c/form\x3e');d=$("#"+d);var g=$(d).clone();$(d).prop("id",a);$(d).before(g);$(d).appendTo(c);if(b)for(var h in b)$('\x3cinput type\x3d"text" style\x3d"display:none;" id\x3d\x3d"'+h+'" name\x3d"'+h+'" value\x3d"'+b[h]+'" /\x3e').appendTo(c);$(c).css("position","absolute");$(c).css("top","-1200px");$(c).css("left","-1200px");$(c).appendTo("body");return c},ajaxFileUpload:function(a){a=jQuery.extend({},jQuery.ajaxSettings,a);var d=(new Date).getTime(),b=jQuery.createUploadForm(d,a.fileElementId,a.data);jQuery.createUploadIframe(d,a.secureuri);var c="jUploadFrame"+d,d="jUploadForm"+d;a.global&&!jQuery.active++&&jQuery.event.trigger("ajaxStart");var g=!1,h={};a.global&&jQuery.event.trigger("ajaxSend",[h,a]);var f=function(d){var f=document.getElementById(c);try{f.contentWindow?(h.responseText=f.contentWindow.document.body?f.contentWindow.document.body.innerHTML:null,h.responseXML=f.contentWindow.document.XMLDocument?f.contentWindow.document.XMLDocument:f.contentWindow.document):f.contentDocument&&(h.responseText=f.contentDocument.document.body?f.contentDocument.document.body.innerHTML:null,h.responseXML=f.contentDocument.document.XMLDocument?f.contentDocument.document.XMLDocument:f.contentDocument.document)}catch(p){jQuery.handleError(a,h,null,p)}if(h||"timeout"==d){g=!0;var r;try{if(r="timeout"!=d?"success":"error","error"!=r){var e=jQuery.uploadHttpData(h,a.dataType);a.success&&a.success(e,r);a.global&&jQuery.event.trigger("ajaxSuccess",[h,a])}else jQuery.handleError(a,h,r)}catch(p){r="error",jQuery.handleError(a,h,r,p)}a.global&&jQuery.event.trigger("ajaxComplete",[h,a]);a.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop");a.complete&&a.complete(h,r);jQuery(f).unbind();setTimeout(function(){try{$(f).remove(),$(b).remove()}catch(p){jQuery.handleError(a,h,null,p)}},100);h=null}};0<a.timeout&&setTimeout(function(){g||f("timeout")},a.timeout);try{b=$("#"+d),$(b).prop("action",a.url),$(b).prop("method","POST"),$(b).prop("target",c),b.encoding?b.encoding="multipart/form-data":b.enctype="multipart/form-data",$(b).submit()}catch(r){jQuery.handleError(a,h,null,r)}window.attachEvent?document.getElementById(c).attachEvent("onload",f):document.getElementById(c).addEventListener("load",f,!1);return{abort:function(){}}},uploadHttpData:function(a,d){var b;b="xml"!=d&&d?a.responseText:a.responseXML;"script"==d&&jQuery.globalEval(b);"json"==d&&eval("data \x3d "+b);"html"==d&&jQuery("\x3cdiv\x3e").html(b).evalScripts();return b}});jQuery.download=function(a,d,b){if(a&&d){d="string"==typeof d?d:jQuery.param(d);var c="";jQuery.each(d.split("\x26"),function(){var a=this.split("\x3d");c+='\x3cinput type\x3d"hidden" name\x3d"'+a[0]+'" value\x3d"'+a[1]+'" /\x3e'});jQuery('\x3cform action\x3d"'+a+'" method\x3d"'+(b||"post")+'"\x3e'+c+"\x3c/form\x3e").appendTo("body").submit().remove()}};
!function(a){a(["jquery"],function(a){return function(){function b(a,b,c){return o({type:u.error,iconClass:p().iconClasses.error,message:a,optionsOverride:c,title:b})}function c(b,c){return b||(b=p()),r=a("#"+b.containerId),r.length?r:(c&&(r=l(b)),r)}function d(a,b,c){return o({type:u.info,iconClass:p().iconClasses.info,message:a,optionsOverride:c,title:b})}function e(a){s=a}function f(a,b,c){return o({type:u.success,iconClass:p().iconClasses.success,message:a,optionsOverride:c,title:b})}function g(a,b,c){return o({type:u.warning,iconClass:p().iconClasses.warning,message:a,optionsOverride:c,title:b})}function h(a){var b=p();r||c(b),k(a,b)||j(b)}function i(b){var d=p();return r||c(d),b&&0===a(":focus",b).length?void q(b):void(r.children().length&&r.remove())}function j(b){for(var c=r.children(),d=c.length-1;d>=0;d--)k(a(c[d]),b)}function k(b,c){return b&&0===a(":focus",b).length?(b[c.hideMethod]({duration:c.hideDuration,easing:c.hideEasing,complete:function(){q(b)}}),!0):!1}function l(b){return r=a("<div/>").attr("id",b.containerId).addClass(b.positionClass).attr("aria-live","polite").attr("role","alert"),r.appendTo(a(b.target)),r}function m(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",target:"body",closeHtml:"<button>&times;</button>",newestOnTop:!0}}function n(a){s&&s(a)}function o(b){function d(b){return!a(":focus",j).length||b?j[g.hideMethod]({duration:g.hideDuration,easing:g.hideEasing,complete:function(){q(j),g.onHidden&&"hidden"!==o.state&&g.onHidden(),o.state="hidden",o.endTime=new Date,n(o)}}):void 0}function e(){(g.timeOut>0||g.extendedTimeOut>0)&&(i=setTimeout(d,g.extendedTimeOut))}function f(){clearTimeout(i),j.stop(!0,!0)[g.showMethod]({duration:g.showDuration,easing:g.showEasing})}var g=p(),h=b.iconClass||g.iconClass;"undefined"!=typeof b.optionsOverride&&(g=a.extend(g,b.optionsOverride),h=b.optionsOverride.iconClass||h),t++,r=c(g,!0);var i=null,j=a("<div/>"),k=a("<div/>"),l=a("<div/>"),m=a(g.closeHtml),o={toastId:t,state:"visible",startTime:new Date,options:g,map:b};return b.iconClass&&j.addClass(g.toastClass).addClass(h),b.title&&(k.append(b.title).addClass(g.titleClass),j.append(k)),b.message&&(l.append(b.message).addClass(g.messageClass),j.append(l)),g.closeButton&&(m.addClass("toast-close-button").attr("role","button"),j.prepend(m)),j.hide(),g.newestOnTop?r.prepend(j):r.append(j),j[g.showMethod]({duration:g.showDuration,easing:g.showEasing,complete:g.onShown}),g.timeOut>0&&(i=setTimeout(d,g.timeOut)),j.hover(f,e),!g.onclick&&g.tapToDismiss&&j.click(d),g.closeButton&&m&&m.click(function(a){a.stopPropagation?a.stopPropagation():void 0!==a.cancelBubble&&a.cancelBubble!==!0&&(a.cancelBubble=!0),d(!0)}),g.onclick&&j.click(function(){g.onclick(),d()}),n(o),g.debug&&console&&console.log(o),j}function p(){return a.extend({},m(),v.options)}function q(a){r||(r=c()),a.is(":visible")||(a.remove(),a=null,0===r.children().length&&r.remove())}var r,s,t=0,u={error:"error",info:"info",success:"success",warning:"warning"},v={clear:h,remove:i,error:b,getContainer:c,info:d,options:{},subscribe:e,success:f,version:"2.0.3",warning:g};return v}()})}("function"==typeof define&&define.amd?define:function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b(require("jquery")):window.toastr=b(window.jQuery)});

/**
* @1900-2100区间内的公历、农历互转
* @charset  UTF-8
* @Author  Ajing(JJonline@JJonline.Cn) 
* @Time  2014-7-21
* @Version  $ID$
* @公历转农历：calendar.solar2lunar(1987,11,01); //[you can ignore params of prefix 0]
* @农历转公历：calendar.lunar2solar(1987,09,10); //[you can ignore params of prefix 0]
*/
var calendar = {
	
	/**
      * 农历1900-2100的润大小信息表
      * @Array Of Property
      * @return Hex 
      */
	lunarInfo:[0x04bd8,0x04ae0,0x0a570,0x054d5,0x0d260,0x0d950,0x16554,0x056a0,0x09ad0,0x055d2,//1900-1909
			0x04ae0,0x0a5b6,0x0a4d0,0x0d250,0x1d255,0x0b540,0x0d6a0,0x0ada2,0x095b0,0x14977,//1910-1919
			0x04970,0x0a4b0,0x0b4b5,0x06a50,0x06d40,0x1ab54,0x02b60,0x09570,0x052f2,0x04970,//1920-1929
			0x06566,0x0d4a0,0x0ea50,0x06e95,0x05ad0,0x02b60,0x186e3,0x092e0,0x1c8d7,0x0c950,//1930-1939
			0x0d4a0,0x1d8a6,0x0b550,0x056a0,0x1a5b4,0x025d0,0x092d0,0x0d2b2,0x0a950,0x0b557,//1940-1949
			0x06ca0,0x0b550,0x15355,0x04da0,0x0a5b0,0x14573,0x052b0,0x0a9a8,0x0e950,0x06aa0,//1950-1959
			0x0aea6,0x0ab50,0x04b60,0x0aae4,0x0a570,0x05260,0x0f263,0x0d950,0x05b57,0x056a0,//1960-1969
			0x096d0,0x04dd5,0x04ad0,0x0a4d0,0x0d4d4,0x0d250,0x0d558,0x0b540,0x0b6a0,0x195a6,//1970-1979
			0x095b0,0x049b0,0x0a974,0x0a4b0,0x0b27a,0x06a50,0x06d40,0x0af46,0x0ab60,0x09570,//1980-1989
			0x04af5,0x04970,0x064b0,0x074a3,0x0ea50,0x06b58,0x055c0,0x0ab60,0x096d5,0x092e0,//1990-1999
			0x0c960,0x0d954,0x0d4a0,0x0da50,0x07552,0x056a0,0x0abb7,0x025d0,0x092d0,0x0cab5,//2000-2009
			0x0a950,0x0b4a0,0x0baa4,0x0ad50,0x055d9,0x04ba0,0x0a5b0,0x15176,0x052b0,0x0a930,//2010-2019
			0x07954,0x06aa0,0x0ad50,0x05b52,0x04b60,0x0a6e6,0x0a4e0,0x0d260,0x0ea65,0x0d530,//2020-2029
			0x05aa0,0x076a3,0x096d0,0x04bd7,0x04ad0,0x0a4d0,0x1d0b6,0x0d250,0x0d520,0x0dd45,//2030-2039
			0x0b5a0,0x056d0,0x055b2,0x049b0,0x0a577,0x0a4b0,0x0aa50,0x1b255,0x06d20,0x0ada0,//2040-2049
			/**Add By JJonline@JJonline.Cn**/
			0x14b63,0x09370,0x049f8,0x04970,0x064b0,0x168a6,0x0ea50, 0x06b20,0x1a6c4,0x0aae0,//2050-2059
			0x0a2e0,0x0d2e3,0x0c960,0x0d557,0x0d4a0,0x0da50,0x05d55,0x056a0,0x0a6d0,0x055d4,//2060-2069
			0x052d0,0x0a9b8,0x0a950,0x0b4a0,0x0b6a6,0x0ad50,0x055a0,0x0aba4,0x0a5b0,0x052b0,//2070-2079
			0x0b273,0x06930,0x07337,0x06aa0,0x0ad50,0x14b55,0x04b60,0x0a570,0x054e4,0x0d160,//2080-2089
			0x0e968,0x0d520,0x0daa0,0x16aa6,0x056d0,0x04ae0,0x0a9d4,0x0a2d0,0x0d150,0x0f252,//2090-2099
			0x0d520],//2100
				
	
	/**
      * 公历每个月份的天数普通表
      * @Array Of Property
      * @return Number 
      */
	solarMonth:[31,28,31,30,31,30,31,31,30,31,30,31],
	

	/**
      * 天干地支之天干速查表
      * @Array Of Property trans["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"]
      * @return Cn string 
      */
	Gan:["\u7532","\u4e59","\u4e19","\u4e01","\u620a","\u5df1","\u5e9a","\u8f9b","\u58ec","\u7678"],
	
	
	/**
      * 天干地支之地支速查表
      * @Array Of Property 
      * @trans["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"]
      * @return Cn string 
      */
	Zhi:["\u5b50","\u4e11","\u5bc5","\u536f","\u8fb0","\u5df3","\u5348","\u672a","\u7533","\u9149","\u620c","\u4ea5"],
	
	
	/**
      * 天干地支之地支速查表<=>生肖
      * @Array Of Property 
      * @trans["鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪"]
      * @return Cn string 
      */
	Animals:["\u9f20","\u725b","\u864e","\u5154","\u9f99","\u86c7","\u9a6c","\u7f8a","\u7334","\u9e21","\u72d7","\u732a"],
	
	
	/**
      * 24节气速查表
      * @Array Of Property 
      * @trans["小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"]
      * @return Cn string 
      */
	solarTerm:["\u5c0f\u5bd2","\u5927\u5bd2","\u7acb\u6625","\u96e8\u6c34","\u60ca\u86f0","\u6625\u5206","\u6e05\u660e","\u8c37\u96e8","\u7acb\u590f","\u5c0f\u6ee1","\u8292\u79cd","\u590f\u81f3","\u5c0f\u6691","\u5927\u6691","\u7acb\u79cb","\u5904\u6691","\u767d\u9732","\u79cb\u5206","\u5bd2\u9732","\u971c\u964d","\u7acb\u51ac","\u5c0f\u96ea","\u5927\u96ea","\u51ac\u81f3"],
	
	
	/**
      * 1900-2100各年的24节气日期速查表
      * @Array Of Property 
      * @return 0x string For splice
      */
	sTermInfo:[	'9778397bd097c36b0b6fc9274c91aa','97b6b97bd19801ec9210c965cc920e','97bcf97c3598082c95f8c965cc920f',
				'97bd0b06bdb0722c965ce1cfcc920f','b027097bd097c36b0b6fc9274c91aa','97b6b97bd19801ec9210c965cc920e',
				'97bcf97c359801ec95f8c965cc920f','97bd0b06bdb0722c965ce1cfcc920f','b027097bd097c36b0b6fc9274c91aa',
				'97b6b97bd19801ec9210c965cc920e','97bcf97c359801ec95f8c965cc920f',	'97bd0b06bdb0722c965ce1cfcc920f',
				'b027097bd097c36b0b6fc9274c91aa','9778397bd19801ec9210c965cc920e','97b6b97bd19801ec95f8c965cc920f',
				'97bd09801d98082c95f8e1cfcc920f','97bd097bd097c36b0b6fc9210c8dc2','9778397bd197c36c9210c9274c91aa',
				'97b6b97bd19801ec95f8c965cc920e','97bd09801d98082c95f8e1cfcc920f',	'97bd097bd097c36b0b6fc9210c8dc2',
				'9778397bd097c36c9210c9274c91aa','97b6b97bd19801ec95f8c965cc920e','97bcf97c3598082c95f8e1cfcc920f',
				'97bd097bd097c36b0b6fc9210c8dc2','9778397bd097c36c9210c9274c91aa','97b6b97bd19801ec9210c965cc920e',
				'97bcf97c3598082c95f8c965cc920f','97bd097bd097c35b0b6fc920fb0722','9778397bd097c36b0b6fc9274c91aa',
				'97b6b97bd19801ec9210c965cc920e','97bcf97c3598082c95f8c965cc920f',	'97bd097bd097c35b0b6fc920fb0722',
				'9778397bd097c36b0b6fc9274c91aa','97b6b97bd19801ec9210c965cc920e','97bcf97c359801ec95f8c965cc920f',
				'97bd097bd097c35b0b6fc920fb0722','9778397bd097c36b0b6fc9274c91aa','97b6b97bd19801ec9210c965cc920e',
				'97bcf97c359801ec95f8c965cc920f','97bd097bd097c35b0b6fc920fb0722','9778397bd097c36b0b6fc9274c91aa',
				'97b6b97bd19801ec9210c965cc920e','97bcf97c359801ec95f8c965cc920f',	'97bd097bd07f595b0b6fc920fb0722',
				'9778397bd097c36b0b6fc9210c8dc2','9778397bd19801ec9210c9274c920e','97b6b97bd19801ec95f8c965cc920f',
				'97bd07f5307f595b0b0bc920fb0722','7f0e397bd097c36b0b6fc9210c8dc2','9778397bd097c36c9210c9274c920e',
				'97b6b97bd19801ec95f8c965cc920f','97bd07f5307f595b0b0bc920fb0722','7f0e397bd097c36b0b6fc9210c8dc2',
				'9778397bd097c36c9210c9274c91aa','97b6b97bd19801ec9210c965cc920e','97bd07f1487f595b0b0bc920fb0722',
				'7f0e397bd097c36b0b6fc9210c8dc2','9778397bd097c36b0b6fc9274c91aa','97b6b97bd19801ec9210c965cc920e',
				'97bcf7f1487f595b0b0bb0b6fb0722','7f0e397bd097c35b0b6fc920fb0722',	'9778397bd097c36b0b6fc9274c91aa',
				'97b6b97bd19801ec9210c965cc920e','97bcf7f1487f595b0b0bb0b6fb0722','7f0e397bd097c35b0b6fc920fb0722',
				'9778397bd097c36b0b6fc9274c91aa','97b6b97bd19801ec9210c965cc920e','97bcf7f1487f531b0b0bb0b6fb0722',
				'7f0e397bd097c35b0b6fc920fb0722','9778397bd097c36b0b6fc9274c91aa','97b6b97bd19801ec9210c965cc920e',
				'97bcf7f1487f531b0b0bb0b6fb0722','7f0e397bd07f595b0b6fc920fb0722',	'9778397bd097c36b0b6fc9274c91aa',
				'97b6b97bd19801ec9210c9274c920e','97bcf7f0e47f531b0b0bb0b6fb0722','7f0e397bd07f595b0b0bc920fb0722',
				'9778397bd097c36b0b6fc9210c91aa','97b6b97bd197c36c9210c9274c920e','97bcf7f0e47f531b0b0bb0b6fb0722',
				'7f0e397bd07f595b0b0bc920fb0722','9778397bd097c36b0b6fc9210c8dc2','9778397bd097c36c9210c9274c920e',
				'97b6b7f0e47f531b0723b0b6fb0722','7f0e37f5307f595b0b0bc920fb0722',	'7f0e397bd097c36b0b6fc9210c8dc2',
				'9778397bd097c36b0b70c9274c91aa','97b6b7f0e47f531b0723b0b6fb0721','7f0e37f1487f595b0b0bb0b6fb0722',
				'7f0e397bd097c35b0b6fc9210c8dc2','9778397bd097c36b0b6fc9274c91aa','97b6b7f0e47f531b0723b0b6fb0721',
				'7f0e27f1487f595b0b0bb0b6fb0722','7f0e397bd097c35b0b6fc920fb0722',	'9778397bd097c36b0b6fc9274c91aa',
				'97b6b7f0e47f531b0723b0b6fb0721','7f0e27f1487f531b0b0bb0b6fb0722','7f0e397bd097c35b0b6fc920fb0722',
				'9778397bd097c36b0b6fc9274c91aa','97b6b7f0e47f531b0723b0b6fb0721','7f0e27f1487f531b0b0bb0b6fb0722',
				'7f0e397bd097c35b0b6fc920fb0722','9778397bd097c36b0b6fc9274c91aa','97b6b7f0e47f531b0723b0b6fb0721',
				'7f0e27f1487f531b0b0bb0b6fb0722','7f0e397bd07f595b0b0bc920fb0722',	'9778397bd097c36b0b6fc9274c91aa',
				'97b6b7f0e47f531b0723b0787b0721','7f0e27f0e47f531b0b0bb0b6fb0722','7f0e397bd07f595b0b0bc920fb0722',
				'9778397bd097c36b0b6fc9210c91aa','97b6b7f0e47f149b0723b0787b0721','7f0e27f0e47f531b0723b0b6fb0722',
				'7f0e397bd07f595b0b0bc920fb0722','9778397bd097c36b0b6fc9210c8dc2','977837f0e37f149b0723b0787b0721',
				'7f07e7f0e47f531b0723b0b6fb0722','7f0e37f5307f595b0b0bc920fb0722','7f0e397bd097c35b0b6fc9210c8dc2',
				'977837f0e37f14998082b0787b0721','7f07e7f0e47f531b0723b0b6fb0721','7f0e37f1487f595b0b0bb0b6fb0722',
				'7f0e397bd097c35b0b6fc9210c8dc2','977837f0e37f14998082b0787b06bd','7f07e7f0e47f531b0723b0b6fb0721',
				'7f0e27f1487f531b0b0bb0b6fb0722','7f0e397bd097c35b0b6fc920fb0722','977837f0e37f14998082b0787b06bd',
				'7f07e7f0e47f531b0723b0b6fb0721','7f0e27f1487f531b0b0bb0b6fb0722','7f0e397bd097c35b0b6fc920fb0722',
				'977837f0e37f14998082b0787b06bd','7f07e7f0e47f531b0723b0b6fb0721','7f0e27f1487f531b0b0bb0b6fb0722',
				'7f0e397bd07f595b0b0bc920fb0722','977837f0e37f14998082b0787b06bd','7f07e7f0e47f531b0723b0b6fb0721',
				'7f0e27f1487f531b0b0bb0b6fb0722','7f0e397bd07f595b0b0bc920fb0722',	'977837f0e37f14998082b0787b06bd',
				'7f07e7f0e47f149b0723b0787b0721','7f0e27f0e47f531b0b0bb0b6fb0722','7f0e397bd07f595b0b0bc920fb0722',
				'977837f0e37f14998082b0723b06bd','7f07e7f0e37f149b0723b0787b0721','7f0e27f0e47f531b0723b0b6fb0722',
				'7f0e397bd07f595b0b0bc920fb0722','977837f0e37f14898082b0723b02d5','7ec967f0e37f14998082b0787b0721',
				'7f07e7f0e47f531b0723b0b6fb0722','7f0e37f1487f595b0b0bb0b6fb0722','7f0e37f0e37f14898082b0723b02d5',
				'7ec967f0e37f14998082b0787b0721','7f07e7f0e47f531b0723b0b6fb0722','7f0e37f1487f531b0b0bb0b6fb0722',
				'7f0e37f0e37f14898082b0723b02d5','7ec967f0e37f14998082b0787b06bd','7f07e7f0e47f531b0723b0b6fb0721',
				'7f0e37f1487f531b0b0bb0b6fb0722','7f0e37f0e37f14898082b072297c35','7ec967f0e37f14998082b0787b06bd',
				'7f07e7f0e47f531b0723b0b6fb0721','7f0e27f1487f531b0b0bb0b6fb0722','7f0e37f0e37f14898082b072297c35',
				'7ec967f0e37f14998082b0787b06bd','7f07e7f0e47f531b0723b0b6fb0721',	'7f0e27f1487f531b0b0bb0b6fb0722',
				'7f0e37f0e366aa89801eb072297c35','7ec967f0e37f14998082b0787b06bd','7f07e7f0e47f149b0723b0787b0721',
				'7f0e27f1487f531b0b0bb0b6fb0722','7f0e37f0e366aa89801eb072297c35','7ec967f0e37f14998082b0723b06bd',
				'7f07e7f0e47f149b0723b0787b0721','7f0e27f0e47f531b0723b0b6fb0722','7f0e37f0e366aa89801eb072297c35',
				'7ec967f0e37f14998082b0723b06bd','7f07e7f0e37f14998083b0787b0721','7f0e27f0e47f531b0723b0b6fb0722',
				'7f0e37f0e366aa89801eb072297c35','7ec967f0e37f14898082b0723b02d5','7f07e7f0e37f14998082b0787b0721',
				'7f07e7f0e47f531b0723b0b6fb0722','7f0e36665b66aa89801e9808297c35',	'665f67f0e37f14898082b0723b02d5',
				'7ec967f0e37f14998082b0787b0721','7f07e7f0e47f531b0723b0b6fb0722',	'7f0e36665b66a449801e9808297c35',
				'665f67f0e37f14898082b0723b02d5','7ec967f0e37f14998082b0787b06bd','7f07e7f0e47f531b0723b0b6fb0721',
				'7f0e36665b66a449801e9808297c35','665f67f0e37f14898082b072297c35',	'7ec967f0e37f14998082b0787b06bd',
				'7f07e7f0e47f531b0723b0b6fb0721','7f0e26665b66a449801e9808297c35',	'665f67f0e37f1489801eb072297c35',
				'7ec967f0e37f14998082b0787b06bd','7f07e7f0e47f531b0723b0b6fb0721',	'7f0e27f1487f531b0b0bb0b6fb0722'],
	
	
	/**
      * 数字转中文速查表
      * @Array Of Property 
      * @trans ['日','一','二','三','四','五','六','七','八','九','十']
      * @return Cn string 
      */
	nStr1:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341"],
	
	
	/**
      * 日期转农历称呼速查表
      * @Array Of Property 
      * @trans ['初','十','廿','卅']
      * @return Cn string 
      */
	nStr2:["\u521d","\u5341","\u5eff","\u5345"],
	

	/**
      * 月份转农历称呼速查表
      * @Array Of Property 
      * @trans ['正','一','二','三','四','五','六','七','八','九','十','冬','腊']
      * @return Cn string 
      */
	nStr3:["\u6b63","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u51ac","\u814a"],
	
	
	/**
      * 返回农历y年一整年的总天数
      * @param lunar Year
      * @return Number
      * @eg:var count = calendar.lYearDays(1987) ;//count=387
      */
	lYearDays:function(y) {
		var i, sum = 348;
		for(i=0x8000; i>0x8; i>>=1) { sum += (calendar.lunarInfo[y-1900] & i)? 1: 0; }
		return(sum+calendar.leapDays(y));
	},
	
	
	/**
      * 返回农历y年闰月是哪个月；若y年没有闰月 则返回0
      * @param lunar Year
      * @return Number (0-12)
      * @eg:var leapMonth = calendar.leapMonth(1987) ;//leapMonth=6
      */
	leapMonth:function(y) { //闰字编码 \u95f0
		return(calendar.lunarInfo[y-1900] & 0xf);
	},
	
	
	/**
      * 返回农历y年闰月的天数 若该年没有闰月则返回0
      * @param lunar Year
      * @return Number (0、29、30)
      * @eg:var leapMonthDay = calendar.leapDays(1987) ;//leapMonthDay=29
      */
	leapDays:function(y) {
		if(calendar.leapMonth(y))  { 
			return((calendar.lunarInfo[y-1900] & 0x10000)? 30: 29); 
		}
		return(0);
	},
	
	
	/**
      * 返回农历y年m月（非闰月）的总天数，计算m为闰月时的天数请使用leapDays方法
      * @param lunar Year
      * @return Number (-1、29、30)
      * @eg:var MonthDay = calendar.monthDays(1987,9) ;//MonthDay=29
      */
	monthDays:function(y,m) {
		if(m>12 || m<1) {return -1}//月份参数从1至12，参数错误返回-1
		return( (calendar.lunarInfo[y-1900] & (0x10000>>m))? 30: 29 );
	},
	
	
	/**
      * 返回公历(!)y年m月的天数
      * @param solar Year
      * @return Number (-1、28、29、30、31)
      * @eg:var solarMonthDay = calendar.leapDays(1987) ;//solarMonthDay=30
      */
	solarDays:function(y,m) {
		if(m>12 || m<1) {return -1} //若参数错误 返回-1
		var ms = m-1;
		if(ms==1) { //2月份的闰平规律测算后确认返回28或29
			return(((y%4 == 0) && (y%100 != 0) || (y%400 == 0))? 29: 28);
		}else {
			return(calendar.solarMonth[ms]);
		}
	},
	
	
	/**
      * 传入offset偏移量返回干支
      * @param offset 相对甲子的偏移量
      * @return Cn string
      */
	toGanZhi:function(offset) {
		return(calendar.Gan[offset%10]+calendar.Zhi[offset%12]);
	},
	
	
	/**
      * 传入公历(!)y年获得该年第n个节气的公历日期
      * @param y公历年(1900-2100)；n二十四节气中的第几个节气(1~24)；从n=1(小寒)算起 
      * @return day Number
      * @eg:var _24 = calendar.getTerm(1987,3) ;//_24=4;意即1987年2月4日立春
      */
	getTerm:function(y,n) {
		if(y<1900 || y>2100) {return -1;}
		if(n<1 || n>24) {return -1;}
		var _table = calendar.sTermInfo[y-1900];
		var _info = [
			parseInt('0x'+_table.substr(0,5)).toString() ,
			parseInt('0x'+_table.substr(5,5)).toString(),
			parseInt('0x'+_table.substr(10,5)).toString(),
			parseInt('0x'+_table.substr(15,5)).toString(),
			parseInt('0x'+_table.substr(20,5)).toString(),
			parseInt('0x'+_table.substr(25,5)).toString()
		];
		var _calday = [
			_info[0].substr(0,1),
			_info[0].substr(1,2),
			_info[0].substr(3,1),
			_info[0].substr(4,2),
			
			_info[1].substr(0,1),
			_info[1].substr(1,2),
			_info[1].substr(3,1),
			_info[1].substr(4,2),
			
			_info[2].substr(0,1),
			_info[2].substr(1,2),
			_info[2].substr(3,1),
			_info[2].substr(4,2),
			
			_info[3].substr(0,1),
			_info[3].substr(1,2),
			_info[3].substr(3,1),
			_info[3].substr(4,2),
			
			_info[4].substr(0,1),
			_info[4].substr(1,2),
			_info[4].substr(3,1),
			_info[4].substr(4,2),
			
			_info[5].substr(0,1),
			_info[5].substr(1,2),
			_info[5].substr(3,1),
			_info[5].substr(4,2),
		];
		return parseInt(_calday[n-1]);
	},
	
	
	/**
      * 传入农历数字月份返回汉语通俗表示法
      * @param lunar month
      * @return Cn string
      * @eg:var cnMonth = calendar.toChinaMonth(12) ;//cnMonth='腊月'
      */
	toChinaMonth:function(m) { // 月 => \u6708
		if(m>12 || m<1) {return -1} //若参数错误 返回-1
		var s = calendar.nStr3[m-1];
		s+= "\u6708";//加上月字
		return s;
	},
	
	
	/**
      * 传入农历日期数字返回汉字表示法
      * @param lunar day
      * @return Cn string
      * @eg:var cnDay = calendar.toChinaDay(21) ;//cnMonth='廿一'
      */
	toChinaDay:function(d){ //日 => \u65e5
		var s;
		switch (d) {
			case 10:
			s = '\u521d\u5341'; break;
		case 20:
			s = '\u4e8c\u5341'; break;
			break;
		case 30:
			s = '\u4e09\u5341'; break;
			break;
		default :
			s = calendar.nStr2[Math.floor(d/10)];
			s += calendar.nStr1[d%10];
		}
		return(s);
	},
	
	
	/**
      * 年份转生肖[!仅能大致转换] => 精确划分生肖分界线是“立春”
      * @param y year
      * @return Cn string
      * @eg:var animal = calendar.getAnimal(1987) ;//animal='兔'
      */
	getAnimal: function(y) {
		return calendar.Animals[(y - 4) % 12]
	},
	
	
	/**
      * 传入公历年月日获得详细的公历、农历object信息 <=>JSON
      * @param y  solar year
      * @param m solar month
      * @param d  solar day
      * @return JSON object
      * @eg:console.log(calendar.solar2lunar(1987,11,01));
      */
	solar2lunar:function (y,m,d) { //参数区间1900.1.31~2100.12.31
		if(y<1900 || y>2100) {return -1;}//年份限定、上限
		if(y==1900&&m==1&&d<31) {return -1;}//下限
		if(!y) { //未传参  获得当天
			var objDate = new Date();
		}else {
			var objDate = new Date(y,parseInt(m)-1,d)
		}
		var i, leap=0, temp=0;
		//修正ymd参数
		var y = objDate.getFullYear(),m = objDate.getMonth()+1,d = objDate.getDate();
		var offset   = (Date.UTC(objDate.getFullYear(),objDate.getMonth(),objDate.getDate()) - Date.UTC(1900,0,31))/86400000;
		for(i=1900; i<2101 && offset>0; i++) { temp=calendar.lYearDays(i); offset-=temp; }
		if(offset<0) { offset+=temp; i--; }
		
		//是否今天
		var isTodayObj = new Date(),isToday=false;
		if(isTodayObj.getFullYear()==y && isTodayObj.getMonth()+1==m && isTodayObj.getDate()==d) {
			isToday = true;
		}
		//星期几
		var nWeek = objDate.getDay(),cWeek = calendar.nStr1[nWeek];
		if(nWeek==0) {nWeek =7;}//数字表示周几顺应天朝周一开始的惯例
		//农历年
		var year = i;
		
		var leap = calendar.leapMonth(i); //闰哪个月
		var isLeap = false;
		
		//效验闰月
		for(i=1; i<13 && offset>0; i++) {
			//闰月
			if(leap>0 && i==(leap+1) && isLeap==false){ 
				--i;
				isLeap = true; temp = calendar.leapDays(year); //计算农历闰月天数
			}
			else{
				temp = calendar.monthDays(year, i);//计算农历普通月天数
			}
			//解除闰月
			if(isLeap==true && i==(leap+1)) { isLeap = false; }
			offset -= temp;
		}
		
		if(offset==0 && leap>0 && i==leap+1)
		if(isLeap){
			isLeap = false;
		}else{ 
			isLeap = true; --i;
		}
		if(offset<0){ offset += temp; --i; }
		//农历月
		var month 	= i;
		//农历日
		var day 		= offset + 1;
		
		//天干地支处理
		var sm 		= 	m-1;
		var term3	=	calendar.getTerm(year,3); //该农历年立春日期
		var gzY 		= 	calendar.toGanZhi(year-4);//普通按年份计算，下方尚需按立春节气来修正
		
		//依据立春日进行修正gzY
		if(sm<2 && d<term3) {
			gzY = calendar.toGanZhi(year-5);
		}else {
			gzY = calendar.toGanZhi(year-4);
		}
		
		//月柱 1900年1月小寒以前为 丙子月(60进制12)
		var firstNode 	= calendar.getTerm(y,(m*2-1));//返回当月「节」为几日开始
		var secondNode = calendar.getTerm(y,(m*2));//返回当月「节」为几日开始
		
		//依据12节气修正干支月
		var gzM 	= 	calendar.toGanZhi((y-1900)*12+m+11);
		if(d>=firstNode) {
			gzM 	= 	calendar.toGanZhi((y-1900)*12+m+12);
		}
		
		//传入的日期的节气与否
		var isTerm = false;
		var Term = null;
		if(firstNode==d) {
			isTerm 	= true;
			Term 	= calendar.solarTerm[m*2-2];
		}
		if(secondNode==d) {
			isTerm 	= true;
			Term 	= calendar.solarTerm[m*2-1];
		}
		//日柱 当月一日与 1900/1/1 相差天数
		var dayCyclical = Date.UTC(y,sm,1,0,0,0,0)/86400000+25567+10;
		var gzD = calendar.toGanZhi(dayCyclical+d-1);
		
		return {'lYear':year,'lMonth':month,'lDay':day,'Animal':calendar.getAnimal(year),'IMonthCn':(isLeap?"\u95f0":'')+calendar.toChinaMonth(month),'IDayCn':calendar.toChinaDay(day),'cYear':y,'cMonth':m,'cDay':d,'gzYear':gzY,'gzMonth':gzM,'gzDay':gzD,'isToday':isToday,'isLeap':isLeap,'nWeek':nWeek,'ncWeek':"\u661f\u671f"+cWeek,'isTerm':isTerm,'Term':Term};
	},	
		
		
	/**
      * 传入公历年月日以及传入的月份是否闰月获得详细的公历、农历object信息 <=>JSON
      * @param y  lunar year
      * @param m lunar month
      * @param d  lunar day
      * @param isLeapMonth  lunar month is leap or not.
      * @return JSON object
      * @eg:console.log(calendar.lunar2solar(1987,9,10));
      */
	lunar2solar:function(y,m,d,isLeapMonth) {	//参数区间1900.1.31~2100.12.1
		var leapOffset = 0;
		var leapMonth = calendar.leapMonth(y);
		var leapDay  	  = calendar.leapDays(y);
		if(isLeapMonth&&(leapMonth!=m)) {return -1;}//传参要求计算该闰月公历 但该年得出的闰月与传参的月份并不同
		if(y==2100&&m==12&&d>1 || y==1900&&m==1&&d<31) {return -1;}//超出了最大极限值
		var day = calendar.monthDays(y,m);
		if(y<1900 || y>2100 || d>day) {return -1;}//参数合法性效验
		
		//计算农历的时间差
		var offset = 0;
		for(var i=1900;i<y;i++) {
			offset+=calendar.lYearDays(i);
		}
		var leap = 0,isAdd= false;
		for(var i=1;i<m;i++) {
			leap = calendar.leapMonth(y);
			if(!isAdd) {//处理闰月
				if(leap<=i && leap>0) { 
					offset+=calendar.leapDays(y);isAdd = true;
				}
			}
			offset+=calendar.monthDays(y,i);
		}
		//转换闰月农历 需补充该年闰月的前一个月的时差
		if(isLeapMonth) {offset+=day;}
		//1900年农历正月一日的公历时间为1900年1月30日0时0分0秒(该时间也是本农历的最开始起始点)
		var stmap 	= 	Date.UTC(1900,1,30,0,0,0);
		var calObj 	= 	new Date((offset+d-31)*86400000+stmap);
		var cY 		= 	calObj.getUTCFullYear();
		var cM 		=	calObj.getUTCMonth()+1;
		var cD 		=	calObj.getUTCDate();
		
		return calendar.solar2lunar(cY,cM,cD);
	}	
};